---
title: "[CS] 비선형 자료 구조: 힙 (Heap)"
date: 2025-06-04 16:08:56 +0900
categories: [CS, 자료구조]
tags: [TIL, CS, 비선형 자료 구조]
---
# CS 5장 자료구조
## 📚 5.3 비선형 자료 구조

### 5.3.3 힙 (Heap)
#### 📘 정의
- 완전 이진 트리 형태의 자료구조로, 부모 노드와 자식 노드 간 우선 순위 관계를 만족하는 구조

- **최대 힙** (Max Heap): 부모 >= 자식
- **최소 힙** (Min Heap): 부모 <= 자식
- 중간 노드 간에는 정렬되지 않음
- 항상 루트에는 최댓값 또는 최솟값

---

#### 📌 사용 예시

- 우선순위 큐: 높은 우선순위 작업 먼저 처리
- OS 스케줄러: CPU 우선순위 기반 프로세스 실행
- 네트워크 라우팅: 최단 경로 알고리즘 (Dijkstra)
- 정렬 알고리즘: 힙 정렬 (Heap Sort)
- 이벤트 처리: 시간 순서대로 이벤트 처리 (이벤트 큐)

---

#### 🎯 주요 특징

- 완전 이진 트리 구조 - 왼쪽부터 데이터 차곡차곡 채움
- 전체 정렬은 아니며, 루트만 우선순위 보장
- 밑단 삽입 후 위로 올라감 (heapify up)
- 루트 제거 후 말단 노드로 대체 ➔ 아래로 내려감 (heapify down)

🆚 힙 트리 vs 정렬 트리

| 항목     | 힙 (Heap)        | 이진 탐색 트리 (BST) |
|--------|-----------------|----------------|
| 목적     | 우선순위 유지         | 정렬된 탐색         |
| 정렬 여부  | 루트만 정렬됨         | 전체 정렬됨         |
| 시간 복잡도 | 삽입/삭제ㅣ O(log n) | 탐색 포함 O(log n) |
| 구현 방식  | 보통 배열 기반        | 노드 기반 (포인터 연결) |


---

#### 🏢 시간 복잡도

| 연산          | 시간 복잡도   | 설명                         |
|-------------|----------|----------------------------|
| 삽입 (insert) | O(log n) | 밑단 ➔ 루트로 이동 (heapify up)   |
| 삭제 (remove) | O(log n) | 루트 제거 후 재정렬 (heapify down) |
| 조회 (peek)   | O(1)     | 루트값 바로 확인 가능               |


✚ **Heapify** 란?
> 부모-자식 간의 우선순위 조건을 유지하도록 트리를 재정렬하는 작업

- **Heapify up**

  ```markdown
  초기 힙:

        5
       / \
      10  7

  3 삽입:
  
          5
         / \
        10  7
       /
      3     ← 삽입
  
  3 < 5 → 부모보다 작음 → 교체:
  
          3
         / \
        10  7
       /
      5
  ```
  ✔️ 최소 힙 성립 완료!

- **Heapify down**

  ```markdown
  초기 힙:

        3
       / \
      5   7
     /
   10

  루트(3) 삭제 → 말단 노드(10)가 루트로 이동:
  
          10
         /  \
        5    7
  
  10 > 5, 10 > 7 → 최소 힙 조건 위반  
  → 둘 중 더 작은 5와 교체:
  
          5
         / \
       10   7

  ```
  ✔️ 최소 힙 조건 복원 완료!

---

#### 💻 Java/Spring 예시

[최소 힙]

```java
PriorityQueue<Integer> minHeap = new PriorityQueue<>();
minHeap.offer(10);
minHeap.offer(5);
minHeap.offer(8);

System.out.println(minHeap.poll()); // 5
  System.out.println(minHeap.peek()); // 8
```

[최대 힙]

```java
PriorityQueue<Integer> maxHeap = new PriorityQueue<>(Comparator.reverseOrder());
maxHeap.offer(10);
maxHeap.offer(5);
maxHeap.offer(8);

System.out.println(maxHeap.poll()); // 10
```

[배열 기반 힙의 인덱스 관계]

```plaintext
배열: [_, 10, 5, 8, 1, 7] (index 1부터 사용 시)

- i번 노드의 자식:
  - 왼쪽 자식: 2i
  - 오른쪽 자식: 2i + 1
- i번 노드의 부모:
  - 부모: i / 2
```
---

#### 🎤 면접 예상 질문
1. 힙이란 무엇인가요?
   - 완전 이진 트리 기반의 자료구조로, 부모 노드와 자식 노드 간의 우선순위를 보장합니다.
   - 대표적으로 최소 힙, 최대 힙이 있으며 우선수위 큐나 힙 정렬, Dijkstra 알고리즘 등에 사용됩니다.
2. 힙은 왜 완전 이진 트리여야 하나요?
   - 완전 이진 트리는 배열 기반 구현에 적합하기 때문입니다.
   - 부모-자식 인덱스 계산이 간단해서 메모리 낭비 없이 효율적으로 구현할 수 있습니다.
3. 우선순위 큐는 내부적으로 어떤 자료구조인가요?
   - 내부적으로 배열 기반의 이진 힙으로 동작합니다.
   - 기본은 최소 힙이며, Comparator 를 전달하면 최대 힙으로 동작할 수 있습니다.
