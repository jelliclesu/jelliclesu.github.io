---
title: "[CS] λ””μμΈ ν¨ν„΄: ν©ν† λ¦¬ ν¨ν„΄ (Factory Pattern)"
date: 2025-04-03 18:08:24 +0900
categories: [CS, λ””μμΈ ν¨ν„΄]
tags: [TIL, CS, ν©ν† λ¦¬ ν¨ν„΄]
---
# CS
## π“ 1.1 λ””μμΈ ν¨ν„΄ (Design Pattern)

### 1.1.2 ν©ν† λ¦¬ ν¨ν„΄ (Factory Pattern)
#### μ •μ
- κ°μ²΄ μƒμ„± λ΅μ§μ„ **λ³„λ„μ λ©”μ†λ“(λλ” ν΄λμ¤) λ΅ λ¶„λ¦¬**ν•μ—¬, κ°μ²΄λ¥Ό μ‚¬μ©ν•λ” μ½”λ“κ°€ **μ–΄λ–¤ κµ¬μ²΄ ν΄λμ¤μ μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν• μ§€ λ°λΌλ„** λλ„λ΅ λ§λ“λ” λ””μμΈ ν¨ν„΄
- μ¦‰, κ°μ²΄λ¥Ό μ§μ ‘ μƒμ„±(new) ν•μ§€ μ•κ³ , **'κ³µμ¥(factory)' κ°™μ€ ν΄λμ¤λ‚ λ©”μ†λ“μ— μƒμ„±μ„ λ§΅κΈ°λ” κµ¬μ΅°**
- κ°μ²΄ μƒμ„± μ±…μ„μ„ **ν΄λΌμ΄μ–ΈνΈμ—μ„ λ¶„λ¦¬**ν•΄μ„ μ½”λ“λ¥Ό λ” μ μ—°ν•κ³  ν™•μ¥ κ°€λ¥ν•κ² λ§λ“¤κΈ° μ„ν•¨

---
#### μμ‹ μƒν™©
1. κ²°μ  νƒ€μ…μ— λ”°λΌ λ‹¤λ¥Έ κ°μ²΄λ¥Ό μƒμ„±ν•΄μ•Ό ν•  λ•
   - μΉ΄λ“ κ²°μ  β” `CardPay`
   - μΉ΄μΉ΄μ¤νμ΄ β” `KakaoPay`
   - ν† μ¤νμ΄ β” `TossPay`
   
   β΅οΈ μ΄κ±Έ `PaymentFactory` κ°€ λ€μ‹  μƒμ„±
2. μ „μ†΅ μλ‹¨μ— λ”°λΌ Sender κ°μ²΄λ¥Ό λ‹¤λ¥΄κ² λ§λ“¤ λ•
   - Email β” `EmailSender`
   - SMS β” `SMSSender`
   - Slack β” `SlackSender`
   
   β΅οΈ ν΄λΌμ΄μ–ΈνΈλ” μ–΄λ–¤ Sender κ°€ λ§λ“¤μ–΄μ§€λ” μ§€ λ°λΌλ„ λ¨
3. μ΄μμ²΄μ μ— λ”°λΌ λ‹¤λ¥Έ λ²„νΌ μƒμ„±ν•  λ•
   - Window β” `WindowButton`
   - Mac β” `MacButton`
 
--- 
#### μ‚¬μ© μ΄μ  / μ¥μ 
1. **κ°μ²΄ μƒμ„± λ΅μ§ λ¶„λ¦¬** β” ν΄λ¦°ν• μ½”λ“
   - μƒμ„±μ— λ€ν• μ±…μ„μ„ ν©ν† λ¦¬μ— μ„μ„ β” **μ±…μ„ λ¶„λ¦¬(SRP)**
2. **κ²°ν•©λ„ λ‚®μ¶¤ (Loose Coupling)**
   - ν΄λΌμ΄μ–ΈνΈλ” μ–΄λ–¤ κµ¬ν„μ κ°€ μƒμ„±λλ” μ§€ λ°λΌλ„ λ¨
   - κ°μ²΄ μƒμ„± μ½”λ“λ¥Ό κ³ μΉμ§€ μ•κ³ λ„ μƒλ΅μ΄ κµ¬ν„μ²΄ μ¶”κ°€ κ°€λ¥
3. **OCP(κ°λ°©-νμ‡„ μ›μΉ™) μ¤€μ**
   - μƒλ΅μ΄ ν΄λμ¤κ°€ μ¶”κ°€λμ–΄λ„ κΈ°μ΅΄ μ½”λ“ μμ •ν•  ν•„μ” μ—†μ

---
#### λ‹¨μ 
1. ν΄λμ¤ μ μ¦κ°€
   - μΈν„°νμ΄μ¤, κµ¬ν„ ν΄λμ¤, ν©ν† λ¦¬ λ“± κµ¬μ„± μ”μ†κ°€ λ§μ•„μ Έ λ³µμ΅ν•΄μ§ μ μμ
2. λ‹¨μν• κµ¬μ΅°μ—” μ¤νλ ¤ κ³Όλ„ν• μ„¤κ³„
   - λ‹¨μν• μƒμ„±μ—” new κ°€ λ” κ°„λ‹¨ν•¨

---
#### μ‹¤λ¬΄ μ‚¬μ© μ—¬λ¶€
- Spring μ—μ„ μμ£Ό μ‚¬μ©λ¨
- νΉν, μ „λµ ν¨ν„΄, DI, μ¤ν”„λ§ λΉ λ“±λ΅κ³Ό ν•¨κ» μμ£Ό κ²°ν•©λμ–΄ μ‚¬μ©

---
#### Java/Spring μμ‹
- ν©ν† λ¦¬ ν¨ν„΄ + μ „λµ ν¨ν„΄ + DI λ¥Ό κ²°ν•©ν• μ¤ν”„λ§ μμ‹

[Payment μΈν„°νμ΄μ¤ κµ¬ν„μ²΄λ¥Ό μƒν™©μ— λ”°λΌ μ„ νƒ]

```java
public interface Payment {
  String getType();
  void pay(int amount);
}

@Component
public class CardPay implements Payment {
    @Override public String getType() { return "card"; }
    @Override public void pay(int amount) {
        System.out.println("Card payment: " + amount);
    }
}

@Component
public class KakaoPay implements Payment {
    @Override public String getType() { return "kakao"; }
    @Override public void pay(int amount) {
        System.out.println("KakaoPay: " + amount);
    }
}

```

[ν©ν† λ¦¬ ν΄λμ¤]

```java
@Component
public class PaymentFactory {

  private final Map<String, Payment> paymentMap;

  public PaymentFactory(List<Payment> payments) {
    this.paymentMap = payments.stream()
      // κ° κ°μ²΄μ getType() μ„ κΈ°μ¤€μΌλ΅ Map κµ¬μ΅°λ΅ μ •λ¦¬
      .collect(Collectors.toMap(Payment::getType, p -> p));
  }

  public Payment getPayment(String type) {
    return paymentMap.get(type);
  }
}

```
- `List<Payment>` : Spring μ΄ μλ™μΌλ΅ `@Component` λ΅ λ“±λ΅λ λ¨λ“  `Payment` κµ¬ν„μ²΄λ¥Ό μ£Όμ…ν•΄μ¤!
- `type` λ¬Έμμ—΄λ§ μ•λ©΄ μ–΄λ–¤ κµ¬ν„μ²΄λ“  **ν©ν† λ¦¬κ°€ μ•μ•„μ„ κΊΌλ‚΄μ¤!**

[μ„λΉ„μ¤ κ³„μΈµ λ“± (μ‚¬μ©ν•λ” μ½)]

```java
@Service
public class OrderService {
  private final PaymentFactory paymentFactory;

  public OrderService(PaymentFactory paymentFactory) {
    this.paymentFactory = paymentFactory;
  }

  public void placeOrder(String payType, int amount) {
    Payment payment = paymentFactory.getPayment(payType);
    payment.pay(amount);
  }
}

```

---
#### λ©΄μ ‘ μμƒ μ§λ¬Έ
1. ν©ν† λ¦¬ ν¨ν„΄μ΄λ€ λ¬΄μ—‡μΈκ°€?
   - ν©ν† λ¦¬ ν¨ν„΄μ€ κ°μ²΄ μƒμ„± λ΅μ§μ„ ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° λ¶„λ¦¬ν•΄μ£Όλ” λ””μμΈ ν¨ν„΄μ…λ‹λ‹¤.
   - ν΄λΌμ΄μ–ΈνΈλ” μ–΄λ–¤ ν΄λμ¤μ μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•΄μ•Ό ν• μ§€ λ°λΌλ„ λκ³ , ν©ν† λ¦¬ ν΄λμ¤ λλ” λ©”μ†λ“κ°€ κ·Έ κ²°μ •μ„ λ€μ‹  ν•©λ‹λ‹¤.
   - μ΄λ΅μ¨ κ°μ²΄ μƒμ„± λ°©μ‹μ λ³€κ²½μ΄ ν•„μ”ν•  λ• ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ¥Ό μμ •ν•μ§€ μ•μ•„λ„ λ©λ‹λ‹¤.

2. ν©ν† λ¦¬ ν¨ν„΄μ„ μ‚¬μ©ν•λ” μ΄μ λ”?
   - κ°€μ¥ ν° μ΄μ λ” κ°μ²΄ μƒμ„± μ±…μ„μ„ λ¶„λ¦¬ν•μ—¬ κ²°ν•©λ„λ¥Ό λ‚®μ¶”κ³ , μ μ—°ν•κ³  ν™•μ¥ κ°€λ¥ν• μ½”λ“ κµ¬μ΅°λ¥Ό λ§λ“¤κΈ° μ„ν•΄μ„μ…λ‹λ‹¤.
   - νΉν μƒλ΅μ΄ κ°μ²΄ μ ν•μ΄ μ¶”κ°€λλ”λΌλ„ ν©ν† λ¦¬ λ‚΄λ¶€λ§ μμ •ν•λ©΄ λκΈ° λ•λ¬Έμ— κ°λ°©-νμ‡„ μ›μΉ™μ„ λ§μ΅±ν•λ” μ„¤κ³„λ¥Ό ν•  μ μμµλ‹λ‹¤.

3. ν©ν† λ¦¬ ν¨ν„΄κ³Ό new ν‚¤μ›λ“ μ§μ ‘ μ‚¬μ©μ μ°¨μ΄λ”?
   - new ν‚¤μ›λ“λ¥Ό μ§μ ‘ μ‚¬μ©ν•λ” λ°©μ‹μ€ κ°μ²΄ μƒμ„± μ‹μ μ΄ μ½”λ“μ— λ°•ν€ μμ–΄ λ³€κ²½μ΄ μƒκΈ°λ©΄ μ „μ²΄ μ½”λ“λ¥Ό μμ •ν•΄μ•Ό ν•μ§€λ§,
   - ν©ν† λ¦¬ ν¨ν„΄μ€ κ°μ²΄ μƒμ„± λ°©μ‹μ„ μ¶”μƒν™”ν•κΈ° λ•λ¬Έμ— κ°μ²΄ μƒμ„± λ°©λ²•μ΄ λ°”λ€μ–΄λ„ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ” κ·Έλ€λ΅ μ‚¬μ©ν•  μ μμµλ‹λ‹¤.

4. Spring μ—μ„ ν©ν† λ¦¬ ν¨ν„΄μ€ μ–΄λ–»κ² ν™μ©?
   - ν©ν† λ¦¬ ν¨ν„΄μ„ μ „λµ ν¨ν„΄κ³Ό ν•¨κ» μ‚¬μ©ν•μ—¬ Bean μ„ μΈν„°νμ΄μ¤λ΅ μ£Όμ…ν• λ’¤, νΉμ • ν‚¤ κ°’μ— λ”°λΌ μ‹¤ν–‰ λ΅μ§μ„ λ¶„κΈ°μ‹ν‚¤λ” λ°©μ‹μΌλ΅ μμ£Ό ν™μ©λ©λ‹λ‹¤.
   - νΉν, `Map<String, Bean>` μ ν•νƒλ΅ DI λ¥Ό ν™μ©ν•λ©΄ if-else μ—†λ” κΉ”λ”ν• μ½”λ“λ΅ μ „λµ μ „ν™μ΄ κ°€λ¥ν•©λ‹λ‹¤.
