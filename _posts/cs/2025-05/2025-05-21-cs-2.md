---
title: "[CS] 프로세스와 스레드: PCB (Process Control Block)"
date: 2025-05-21 12:20:53 +0900
categories: [CS, 프로세스와 스레드]
tags: [TIL, CS]
---
# CS
## 📚 3.3 프로세스와 스레드

### 3.3.4 PCB (Process Control Block)

#### 📘 정의
- 운영체제가 **각 프로세스를 관리하기 위해 메모리에 저장해두는 정보 블록 (구조체)**
- 운영체제의 **커널 영역 메모리**에 저장됨
  - 커널만 PCB 생성, 수정, 제거 가능
  - 사용자 프로세스는 PCB 접근 불가

---

#### 📌 PCB 에 담긴 정보

- **PID (Process ID)**: 고유한 프로세스 식별 번호
- **프로세스 상태**: Ready, Running, Waiting 등 현재 상태
- **프로그램 카운터**: 다음에 실행할 명령어의 주소
- **CPU 레지스터 값**: 문맥 전환 시 레지스터 값 저장
- **메모리 정보**: 코드, 데이터, 스택, 힙의 시작 주소 등
- **열린 파일 목록**: 해당 프로세스가 사용하는 파일 디스크립터
- **스케줄링 정보**: 우선순위, CPU 사용 시간, 큐 포인터 등
- **부모/자식 관계**: fork 된 부모 PID, 자식 PID 등 관계 정보

---

#### 🎯 문맥 전환 (Context Switch)
- 운영체제가 **실행 중인 프로세스(또는 스레드)의 상태를 저장하고, 다른 프로세스로 전환하는 과정**
- 전환 전 프로세스 상태는 PCB 에 저장하고, 전환 후 프로세스의 상태는 PCB 에서 복원

- CPU 는 한 번에 하나의 프로세스만 실행 가능 (단일 코어 기준)
  - ➔ 동시에 여러 프로세스를 실행하는 것처럼 보이려면 운영체제가 일정 시간마다 프로세스를 바꿔줘야 함!

##### "**문맥**" 이란?
- 프로세스의 상태 전체 = 레지스터 값, 프로그램 카운터, 스택 포인터, 메모리 참조 정보 등

--

##### ✏️ 과정

```plaintext
[1] 현재 프로세스 실행 중 (A)
[2] 전환 조건 발생 (ex: I/O 요청, 시간 초과, 우선순위 높은 프로세스 등장)
[3] A 의 레지스터, PC(Program Counter), 상태 등을 PCB 에 저장
[4] 새로 실행할 프로세스 B 의 PCB 에서 정보 불러오기
[5] CPU 레지스터/PC 세팅 ➔ B 실행 시작
```

- ⭐️ 문맥 전환 발생 상황
  - **CPU 선점**: 시간이 다 되어 OS 가 다른 프로세스에게 CPU 넘김
    - ex: Round Robin 스케줄링
  - **I/O 요청**: 실행 중 프로세스가 디스크 등 외부 자원 대기 필요
    - ex: read(), Scanner.nextLine() 등
  - **우선순위 변경**: 더 높은 우선순위 프로세스 등장
    - ex: 실시간 프로세스
  - **시그널 수신 / 예외 처리**: 인터럽트 등 외부 이벤트 발생
    - ex: 타이머 인터럽트, 디버깅 등
--

##### ⚠️ 단점
- 느림: PCB 저장/복원에 CPU 시간이 소모됨
- 캐시 무효화: CPU 캐시가 바뀌어 새로 로딩 필요
- 자주 발생 시 성능 저하: 스케줄링 오버헤드가 증가하면 실제 실행 시간이 감소함

➡︎ 문맥 전환을 최소화하는 전략이 중요!!

#### 🎤 면접 예상 질문
1. 운영체제는 프로세스를 어떻게 관리하나요?
   - 각 프로세스마다 PCB 를 생성하고, 이 구조체 안에 PID, 상태, 메모리 정보 등을 저장합니다.
   - PCB 는 문맥 전환 시 필수 정보로 사용되며, 프로세스가 종료되면 PCB 도 함께 삭제됩니다.
2. PCB 는 어디에 위치해있나요?
   - 운영체제의 커널 영역에 있으며, 사용자 프로그램은 직접 접근할 수 없습니다.
   - 이는 보안과 안정성 확보를 위한 보호 구조이며, 커널만이 PCB 를 생성/관리/삭제할 수 있습니다.
3. 문맥 전환이란 무엇인가요?
   - 운영체제가 현재 실행 중인 프로세스의 상태를 저장하고, 다른 프로세스의 상태를 불러와 실행하는 과정입니다.
   - CPU 가 여러 프로세스를 번갈아 처리할 수 있도록 하는 핵심 메커니즘입니다.
4. 문맥 전환은 언제 발생하나요?
   - 시간 초과, I/O 요청, 인터럽트, 우선순위 변화 등으로 운영체제가 다른 프로세스를 실행해야할 때 발생합니다.
   - 이 과정에서 현재 프로세스의 정보는 PCB 에 저장되고, 다음 프로세스의 PCB 에서 정보를 복원해 실행을 이어갑니다.
