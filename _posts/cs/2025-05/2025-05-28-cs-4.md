---
title: "[CS] 인덱스: B-트리 (Balanced Tree)"
date: 2025-05-28 11:18:02 +0900
categories: [CS, 데이터베이스]
tags: [TIL, CS, 인덱스]
---
# CS 4장 데이터베이스
## 📚 4.5 인덱스

### 4.5.2 B-트리 (Balanced Tree)

#### 📘 정의
- 데이터베이스 인덱스에서 가장 일반적으로 사용되는 **균형 이진 트리 기반의 자료구조**

---

#### ⭐️ 특징
- 모든 리프 노드가 동일한 깊이를 가짐
- 삽입/삭제 후에도 균형 유지
- **O(log n)** 시간 복잡도로 검색 가능
- 정렬된 구조로 `ORDER BY` 성능 향상
- 범위 검색 (`BETWEEN`, `LIKE 'A%'` 등) 최적화

---

#### 📌 구조 예시

```plaintext
        [20]
       /    \
   [10]     [30, 40]
```
- 루트 노드는 중간값 20
- 왼쪽 서브트리는 10 이하
- 오른쪽 서브트리는 30 이상
- 리프 노드는 항상 같은 깊이

---

#### 🎯 사용 이유
- 균형 트리이므로 검색 시 최악의 경우도 예측 가능 (log n)
- 정렬된 순서 유지 가능 ➔ `ORDER BY`, 범위 검색에 유리
- 디스크 접근을 줄이도록 설계되어 디스크 I/O 친화적

---

#### 🆚 B-트리 vs B+트리

| 항목       | **B-트리**          | **B+트리**                                |
|----------|---------------|-----------------------------------------|
| 데이터 저장   | 모든 노드에 데이터 저장 | 리프 노드에만 실제 데이터 저장, 내부 노드에는 탐색용 Key 만 보유 |
| 순차 접근    | 복잡함           | 리프 노드끼리 연결되어 범위 검색에 유리                  |
| MySQL 사용 | X (이론적)       | InnoDB 인덱스는 B+트리 기반                     |

- 실무에서는 대부분 B+트리 구조 사용!

---

#### 🏢 실무에서 활용 예시

```sql
CREATE INDEX idx_name ON user(name);
```

- 이름에 B-트리 인덱스 생성
  - `WHERE name = '지수'`
  - `WHERE name BETWEEN '가' AND '하'`
  - `ORDER BY name`

➡︎ 전부 인덱스 사용 가능 = 범위 & 정렬 최적화

---

#### 💻 동작 방식 예시

[B-트리]

- 이메일로 사용자 검색 시 인덱스가 B-트리 구조라면?
  1. 루트 노드에서 검색 시작
  2. 값을 비교하여 왼쪽 또는 오른쪽 서브트리로 이동
  3. 리프 노드까지 이동 ➔ 데이터 위치 확인
  4. 해당 위치로 빠르게 접근

[B+트리]

- 나이가 20 이상 30 이하인 사용자 찾기
  1. 루트 노드에서 20 이상인 첫 리프 노드로 이동
  2. 이후 리프 노드를 오른쪽으로 순차 스캔
  3. 조건 만족하는 값만 가져옴 - 중간 트리 이동 없이 빠르게 탐색

---

#### 🎤 면접 예상 질문
1. B-트리 인덱스란?
   - 균형 잡힌 트리 구조로, 데이터베이스에서 빠른 검색과 정렬을 위해 사용하는 기본 인덱스 구조입니다.
   - 대부분의 RDBMS 는 B+Tree 구조를 사용하여 범위 검색, 정렬, 조회 성능을 최적화합니다.
2. B+트리와 B-트리 차이는?
   - B+트리는 실제 데이터를 리프 노드에만 저장하고, 리프 노드들을 순차 연결하여 정렬, 범위 검색에 매우 효율적입니다.
   - 반면 B-트리는 모든 노드에 데이터를 저장해 정렬은 비효율적일 수 있습니다.
