---
title: "[CS] 프로세스와 스레드: 교착 상태 (DeadLock)"
date: 2025-05-22 12:58:55 +0900
categories: [CS, 프로세스와 스레드]
tags: [TIL, CS]
---
# CS
## 📚 3.3 프로세스와 스레드

### 3.3.8 교착 상태 (DeadLock)

#### 📘 정의
- 둘 이상의 프로세스 (또는 스레드)가 **서로 자원을 점유한 채, 상대방이 가진 자원을 무한히 기다리는 상태**

---

#### 📌 교착 상태 발생 4가지 필수 조건
1. **상호 배제 (Mutual Exclusion)**: 자원은 한 번에 하나의 프로세스만 사용 가능
2. **점유와 대기 (Hold and Wait)**: 자원을 가진 상태에서 다른 자원을 기다림
3. **비선점 (No Preemption)**: 자원을 강제로 뺏을 수 없음
4. **환형 대기 (Circular Wait)**: 각 프로세스가 다음 자원을 기다리는 원형 대기 상태

➡︎ 이 4가지가 **모두 만족**될 때 교착 상태가 발생할 수 있음

- (예시) A 와 B가 서로 자원 점유 중
  
  ```plaintext
  [A] 자원 1 점유 ➔ 자원 2 요청 (B가 점유 중)
  [B] 자원 2 점유 ➔ 자원 1 요청 (A가 점유 중)
  ➡︎ 서로 무한 대기 = Deadlock
  ```

---

#### 🎯 교착 상태 해결 전략
##### 1. **예방 (Prevention)**
> 4가지 조건 중 최소 하나라도 애초에 발생하지 않게 하는 방법

- 상호 배제 없애기: 거의 불가능 (공유 자원이니까)
- 점유와 대기 방지: 자원 요청 전 미리 모두 확보
- 선점: 요청 실패 시 자원 반납하여 다른 프로세스가 자원을 사용할 수 있게 함
- 환형 대기 방지: 자원 할당 순서를 고정 (Lock 순서)

##### 2. **회피 (Avoidance)**
> 교착 상태에 빠질 가능성이 있다면 실행 자체를 보류
   
- 대표 알고리즘: **은행원 알고리즘 (Banker's Algorithm)**
  - 미리 자원 상태를 시뮬레이션해서 안전한 경우에만 실행

##### 3. **탐지 및 회복 (Detection & Recovery)**
> 교착 상태가 실제로 발생했는지 탐지하고, 발생 시 일부 프로세스 강제 종료

  - 데이터베이스나 실시간 시스템, 금융 처리 시스템처럼 Deadlock 발생 시 큰 피해가 있는 환경에서 사용

##### 4. **무시 전략 (Ignore it)**
> 가장 실용적인 방식
  
- Deadlock 은 드물게 일어나니 그냥 재부팅하자
- ex: Windows, Linux 대부분 무시 전략 + 최소 회피 전략 사용

---

#### 🎤 면접 예상 질문
1. 교착 상태란 무엇인가요?
   - 둘 이상의 프로세스가 서로 필요한 자원을 점유한 채 상대방이 가진 자원을 무한히 기다리는 상태를 말합니다.
   - 이로 인해 모든 프로세스가 멈춰 시스템이 진전되지 못합니다.
2. 교착 상태가 발생하기 위한 조건은?
   - 상호 배제, 점유와 대기, 비선점, 환형 대기의 4가지 조건이 모두 만족될 때 발생합니다.
3. 교착 상태를 방지하는 방법은?
   - 가장 실용적인 방법은 Lock 획득 순서를 고정하고, 타임아웃을 설정해 자원을 오래 기다리지 않고 포기하는 전략입니다.
   - 운영체제는 일반적으로 무시와 최소 회피 전략을 함께 사용합니다.
