---
title: "[CS] ì¸ë±ìŠ¤: ì¸ë±ìŠ¤ ë§Œë“œëŠ” ë°©ë²•"
date: 2025-05-28 11:54:36 +0900
categories: [CS, ë°ì´í„°ë² ì´ìŠ¤]
tags: [TIL, CS, ì¸ë±ìŠ¤]
---
# CS 4ì¥ ë°ì´í„°ë² ì´ìŠ¤
## ğŸ“š 4.5 ì¸ë±ìŠ¤

### 4.5.3 ì¸ë±ìŠ¤ ë§Œë“œëŠ” ë°©ë²•

#### ğŸ“˜ ê¸°ë³¸ ê°œë…
- ì¸ë±ìŠ¤ëŠ” íŠ¹ì • ì»¬ëŸ¼ì— ëŒ€í•´ ê²€ìƒ‰ ì„±ëŠ¥ì„ ë†’ì´ê¸° ìœ„í•´ ìˆ˜ë™ìœ¼ë¡œ ìƒì„±í•  ìˆ˜ ìˆìŒ
- SQL: `CREATE INDEX`
- JPA: `@Index` ì‚¬ìš©

---

#### ğŸ“Œ SQL ë¡œ ì¸ë±ìŠ¤ ìƒì„±
##### â­ï¸ **ê¸°ë³¸ ì¸ë±ìŠ¤ ìƒì„±**

```sql
CREATE INDEX idx_user_email
ON user(email);
```

- `user` í…Œì´ë¸”ì˜ `email` ì»¬ëŸ¼ì— ì¸ë±ìŠ¤ ìƒì„±

--

##### â­ï¸ **ë³µí•© ì¸ë±ìŠ¤ (Composite Index)**

```sql
CREATE INDEX idx_order_user_created
  ON orders(user_id, created_at);
```

- `user_id + created_at` ì„ ë¬¶ì–´ì„œ ì¸ë±ìŠ¤
- ì£¼ì˜: **ì™¼ìª½ë¶€í„° ìˆœì„œëŒ€ë¡œë§Œ ì¸ë±ìŠ¤ ì‚¬ìš©ë¨** (`user_id` ë§Œ OR `user_id + create_at` ë§Œ)

--

##### â­ï¸ **UNIQUE ì¸ë±ìŠ¤**
- ì¤‘ë³µ ë°©ì§€

```sql
CREATE UNIQUE INDEX idx_user_nickname
  ON user(nickname);
```

- ì¤‘ë³µëœ `nickname` ì…ë ¥ ë¶ˆê°€

--

##### â­ **ì¸ë±ìŠ¤ ì‚­ì œ (Drop)**

```sql
DROP INDEX idx_user_email ON user;
```
---

#### ğŸ’» Java/Spring ì˜ˆì‹œ

##### â­ï¸ **ë‹¨ì¼ ì¸ë±ìŠ¤**

```java
@Entity
@Table(name = "user", indexes = {
  @Index(name = "idx_email", columnList = "email")
})
public class User {
  @Id
  private Long id;

  private String email;
}
```


##### â­ï¸ **ë³µí•© ì¸ë±ìŠ¤**

```java
@Entity
@Table(name = "orders", indexes = {
  @Index(name = "idx_user_created", columnList = "user_id, created_at")
})
public class Order {
  @Id
  private Long id;

  private Long userId;
  private LocalDateTime createdAt;
}
```

- `columnList` ì— ìˆœì„œëŒ€ë¡œ ì…ë ¥

---

#### ğŸ¢ ì¸ë±ìŠ¤ ì„¤ê³„ ì‹œ ê³ ë ¤ì‚¬í•­

- WHERE ì ˆ ìì£¼ ë“±ì¥í•˜ëŠ” ì»¬ëŸ¼
- ORDER BY ìì£¼ ë“±ì¥í•˜ëŠ” ì»¬ëŸ¼
- JOIN ì‹œ ê¸°ì¤€ ì»¬ëŸ¼
- INSERT/UPDATE ë§ì€ ì»¬ëŸ¼ì€ ì‹ ì¤‘íˆ

---

#### âš ï¸ ì£¼ì˜í•  ì 
- ë³µí•© ì¸ë±ìŠ¤ëŠ” **ì™¼ìª½ë¶€í„° ìˆœì„œëŒ€ë¡œ ì‚¬ìš©**ë˜ë¯€ë¡œ ìˆœì„œ ì¤‘ìš”
- `LIKE` ê²€ìƒ‰ ì‹œ **ì ‘ë‘ì–´** (`LIKE 'A%'`) ë§Œ ì¸ë±ìŠ¤ ì ìš©ë¨
- `IS NULL` ì€ ì¸ë±ìŠ¤ ì ìš©ë˜ì§€ë§Œ ê²½ìš°ì— ë”°ë¼ ë‹¤ë¦„
- ë„ˆë¬´ ë§ì€ ì¸ë±ìŠ¤ëŠ” ì˜¤íˆë ¤ ì„±ëŠ¥ ì €í•˜, ê³µê°„ ì°¨ì§€

---

#### ğŸ¤ ë©´ì ‘ ì˜ˆìƒ ì§ˆë¬¸
1. ë³µí•© ì¸ë±ìŠ¤ë€ ë¬´ì—‡ì´ê³  ì–´ë–»ê²Œ ì‚¬ìš©í•˜ë‚˜ìš”?
   - ì—¬ëŸ¬ ì»¬ëŸ¼ì„ í•˜ë‚˜ë¡œ ë¬¶ì€ ì¸ë±ìŠ¤ë¡œ, ì™¼ìª½ ìš°ì„  ê·œì¹™ì´ ì ìš©ë©ë‹ˆë‹¤.
   - ì˜ˆë¥¼ ë“¤ì–´ `user_id`, `created_at` ì»¬ëŸ¼ì— ë³µí•© ì¸ë±ìŠ¤ë¥¼ ë§Œë“¤ë©´
   - `WHERE user_id = ?` ë˜ëŠ” `WHERE user_id = ? AND created_at = ?` ì¿¼ë¦¬ì—ë§Œ ì ìš©ë˜ê³ ,
   - `created_at` ë§Œ ì‚¬ìš©í•˜ëŠ” ì¡°ê±´ì—ëŠ” ì ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
2. Spring JPA ì—ì„œëŠ” ì¸ë±ìŠ¤ë¥¼ ì–´ë–»ê²Œ ì§€ì •í•˜ë‚˜ìš”?
   - `@Table(indexes = {@Index(...)})` ì• ë…¸í…Œì´ì…˜ì„ í†µí•´ ì¸ë±ìŠ¤ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
   - ì‹¤ì œë¡œëŠ” JPA ê°€ DDL ì„ ìë™ìœ¼ë¡œ ìƒì„±í•˜ë©°, ìŠ¤í‚¤ë§ˆì— ì¸ë±ìŠ¤ê°€ ë°˜ì˜ë©ë‹ˆë‹¤.
