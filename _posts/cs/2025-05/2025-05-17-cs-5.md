---
title: "[CS] HTTP: HTTP/3"
date: 2025-05-17 18:29:21 +0900
categories: [CS, 네트워크]
tags: [TIL, CS, HTTP]
---
# CS 2장 네트워크
## 📚 2.5 HTTP

### 2.5.5 HTTP/3

#### 📘 정의
- 2022년 공식 표준화된 최신 HTTP 버전
- UDP + QUIC 프로토콜 위에서 동작

⭐️ **QUIC** (Quick UDP Internet Connection)
- 구글이 만든 UDP 기반의 TCP + TLS 대체 프로토콜

| 기능           | 설명                              |
|--------------|---------------------------------|
| **UDP** 기반       | TCP 연결 설정/복구 지연 해소              |
| **TLS 1.3 내장**   | 보안 + 성능 동시 확보                   |
| **Multiplexing** | 패킷 손실이 다른 요청에 영향 없이 독립 처리       |
| **0-RTT** 연결 재개  | 이전 연결 정보를 활용해 핸드셰이크 없이 바로 전송 가능 |

- ✚ **0-RTT** (Zero Round-Trip Time)
  - 클라이언트가 TLS 핸드셰이크를 마치기 전에 데이터를 먼저 보내는 방식 ➔ **연결 수립과 동시에 요청 데이터를 전송**!
  - 클라이언트가 **과거에 접속한 적이 있는 서버**이고, 이전에 받은 **세션 정보를 재사용**할 수 있을 때 가능
   
--

💡 비교

| 항목           | HTTP/2       | HTTP/3         |
|--------------|--------------|----------------|
| 기반 전송        | TCP          | UDP            |
| 핸드셰이크        | TCP + TLS 별도 | QUIC ( TLS 내장) |
| HOL Blocking | 있음           | 없음             |
| 연결 복원        | 느림 (재연결 필요)  | 빠름 (연결 식별자 사용) |
| 모바일 친화       | 보통           | 훨씬 우수          |



---

#### 📌 실제 작동 흐름

```plaintext
1. 클라이언트가 서버에 UDP로 QUIC 연결 요청 (포트 443)
   - "나 HTTP/3 지원함!" (→ ALPN에 'h3' 포함)

2. 서버가 QUIC 연결 수락 + TLS 1.3 내장된 Hello 응답
   - TLS 핸드셰이크와 연결 수립이 동시에 진행됨
   - 연결마다 고유한 Connection ID 부여

3. 0-RTT 가능
   - 이전에 연결한 적 있는 서버라면 → 암호 정보 기억 → 데이터 바로 전송

4. 연결 수립 후 → Stream 단위로 요청/응답 전송
   - 요청 A (stream 1), 요청 B (stream 3) ... 독립적이고 병렬

5. 한 요청 지연돼도 다른 요청은 정상 응답
   - HOL Blocking 없음
```

---

#### 🎯 사용 이유 / 장점
- **모바일 환경 최적화** - 네트워크 이동해도 연결 유지 가능
- **빠른 초기 연결** - TCP + TLS 과정 생략 (0-RTT)
- **고성능 스트리밍** - 지연 시간 감소 + 끊김 최소화

---

#### ⚠️ 단점
- 프록시/방화벽 호환성 문제 - 일부 네트워크 장비는 UDP 차단하거나 QUIC 비호환
- 인프라 적용 중 일부 제한 - 기업 환경이나 구형 인프라는 아직 HTTP/2 선호
- 디버깅 도구 부족 - HTTP/2 보다 분석 도구가 덜 성국

---

#### 🏢 실무 사용 여부 (2025년 5월 기준)

| 분야        | 상태                                                        |
| --------- | --------------------------------------------------------- |
|**브라우저**   | Chrome, Edge, Safari, Firefox → **기본 지원 중**               |
|**CDN**    | Cloudflare, Fastly, AWS CloudFront → **HTTP/3 기본 활성화**    |
|**대형 서비스** | Google, Facebook, YouTube, Instagram → **이미 HTTP/3 사용 중** |
|**기업 내 자체 서버** | 일부 도입 시도 중. **HTTP/2 우선 유지 많음**                           |
|**내부망, API 서버** | 대부분 HTTP/1.1 또는 HTTP/2 사용 유지 (성능보다 안정성 중시)                |

---

#### 🎤 면접 예상 질문
1. HTTP/3 은 왜 나왔나요?
   - HTTP/2 는 TCP 기반으로 패킷 하나가 손실되면 전체가 지연되는 문제가 있고, 연결 수립 시 TCP + TLS 핸드셰이크로 인해 지연이 발생합니다.
   - HTTP/3 는 이를 해결하기 위해 UDP 기반의 QUIC 프로토콜 위에서 동작하며, 더 빠르고 신뢰성 있는 통신이 가능해졌습니다.
2. HTTP/3 는 TCP 를 사용하지 않는데, 신뢰성은 괜찮나요?
   - UDP 위에서 동작하지만, QUIC 프로토콜이 TCP 의 흐름 제어, 재전송, 순서 보장 기능을 모두 자체적으로 포함하고 있습니다.
   - 또한, TLS 1.3 도 내장되어 있어 보안과 성능을 동시에 갖춘 구조입니다.
3. HTTP/3 는 어떤 상황에서 유리한가요?
   - 모바일 환경이나 이동 네트워크, 스트리밍 서비스, 초기 연결 속도가 중요한 서비스에 특히 유리합니다.
   - 예를 들어, 유튜브, 넷플릭스, 인스타그램은 HTTP/3 기반 QUIC 를 적극적으로 활용 중입니다.
