---
title: "[CS] 데이터베이스의 기본: 키 (Key)"
date: 2025-05-26 12:41:37 +0900
categories: [CS, 데이터베이스]
tags: [TIL, CS, 데이터베이스의 기본]
---
# CS 4장 데이터베이스
## 📚 4.1 데이터베이스의 기본

### 4.1.7 키 (Key)

#### 📘 정의
- 테이블 내에서 레코드를 **유일하게 식별**하거나, **다른 테이블과의 관계를 표현하기 위해 사용하는 속성**

---

#### 📌 주요 키

| 종류                   | 설명                                   | 예시                    |
|----------------------|--------------------------------------|-----------------------|
| **기본 키 (Primary Key)**   | 테이블에서 각 레코드를 **유일하게 식별** (유일성, 최소성 만족)   | `user.id`, `order.id`     |
| **후보 키 (Candidate Key)** | 기본 키로 선택할 수 있는 모든 키 (유일성, 최소성 만족)    | `email`, `username` 등     |
| **대체 키 (Alternate Key)** | 후보 키 중 **기본 키로 선택되지 않은 키** (유일성, 최소성 만족) | 기본 키: `id`, 대체 키: `email` |
| **슈퍼 키 (Super Key)**     | **유일성은 만족**하지만 최소성은 만족하지 않는 모든 속성 조합     | `{id}`, `{id, name}` 등    |
| **외래 키 (Foreign Key)**   | **다른 테이블의 기본 키를 참조**                     | `order.user_id`         |


---

#### 🎯예시

| 테이블 | 속성      | 제약조건             |
|---|---------|------------------|
| `users` | `id`      | PK (Primary Key) |
| `users` | `email`   | Unique           |
| `users` | `name`    |                  |
| `orders` | `id`      | PK               |
| `orders` | `user_id` | FK (Foerign Key) |

- `user.id` 는 기본 키
- `orders.user_id` = `user.id` 를 참조하는 외래 키
- `user.email` 은 후보 키이지만 기본 키로 선택되지 않아 대체 키

---

#### ⭐️ 키 제약조건 (SQL)

- `PRIMARY KEY` - 기본 키 = `NOT NULL` + `UNIQUE`
- `UNIQUE` - 중복 허용 X (NULL 은 허용)
- `FOREIGN KEY` - 외래 키 (참조 무결성 보장)
- `NOT NULL` - 값 필수 (NULL 불가)

---

#### 🏢 실무에서의 역할
- **데이터 식별**: 각 레코드를 유일하게 구분 (기본 키)
- **데이터 무결성**: 외래 키로 존재하는 값만 참조 가능
- **관계 설정**: 외래 키 기반으로 테이블 연결 (**JOIN**)
- **성능 최적화**: **키 기반 인덱스**를 통해 검색 속도 개선

---

#### 💻 Java/Spring 예시

```java
@Entity
@Table(name = "users")
public class User {
    @Id  // 기본 키
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(unique = true)  // 후보 키
    private String email;
}

@Entity
@Table(name = "orders")
public class Order {
  @Id
  private Long id;

  @ManyToOne
  @JoinColumn(name = "user_id")  // 외래 키
  private User user;
}
```
- `User.id`: 기본 키
- `User.email`: 후보 키 + Unique
- `Order.user_id`: 외래 키

---

#### 🎤 면접 예상 질문
1. 기본 키란 무엇인가요?
   - 테이블에서 각 레코드를 유일하게 식별할 수 있는 속성입니다.
   - 유일성과 최소성을 만족하며, NULL 값이 허용되지 않습니다.
2. 외래 키는 왜 필요한가요?
   - 다른 테이블의 기본 키를 참조해 테이블 간 관계를 연결하고 데이터 정합성을 유지하기 위해 필요합니다.
   - 존재하지 않는 Id 참조를 막아주고, JOIN 에도 사용됩니다.
3. 후보 키와 대체 키의 차이는?
   - 후보 키와 대체 키 모두 유일성과 최소성을 만족하는 키로,
   - 후보 키는 기본 키로 선택될 수 있는 속성이여,
   - 대체 키는 후보 키 중에 기본 키로 선택되지 않는 나머지 키를 나타냅니다.
