---
title: "[CS] 프로세스와 스레드: 공유 자원과 임계 영역"
date: 2025-05-22 12:41:55 +0900
categories: [CS, 운영체제]
tags: [TIL, CS, 프로세스와 스레드]
---
# CS 3장 운영체제
## 📚 3.3 프로세스와 스레드

### 3.3.7 공유 자원과 임계 영역

#### 📘 정의
- **공유 자원** (Shared Resource)
  - 두 개 이상의 스레드 (또는 프로세스)가 동시에 접근할 수 있는 자원

- **임계 영역** (Critical Section)
  - 둘 이상의 스레드가 동시에 실행하면 안 되는 코드 영역
  - 공유 자원을 읽거나 쓸 수 있는 코드 블록
  - **여러 스레드가 동시에 자원을 변경하면 Race Condition(값 덮어쓰기, 비정상 동작, 예외 등) 발생**하므로 **임계 영역 보호**해야 함!

---

#### 📌 임계 영역 보호 방법
✔️ **상호 배제** (Mutual Exclusion)
- **임계 영역에 하나의 스레드만 진입하도록 제어**

##### 동기화 기법

| 기법              | 설명                             | 사용 예                           |
|-----------------|--------------------------------|--------------------------------|
| **Mutex (뮤텍스)**     | Lock 을 통해 단 하나만 진입 허용          | `ReentrantLock`, `synchronized`    |
| **Semaphore (세마포어)** | 제한된 개수만 진입 허용                  | DB 커넥션 풀, 스레드 풀                |
| **Spin Lock**       | Lock 이 풀릴 때까지 루프 돌며 대기         | 짧은 시간 잠금에 유리                   |
| **Monitor**         | 객체 내부에서 Lock + Condition 함께 관리 | Java 의 `synchronized`            |
| **Atomic 변수**       | 원자적 연산으로 Race 방지               | `AtomicInteger`, `compareAndSet()` |

---

#### ⚠️ 주의점
- 너무 넓게 잡으면 ➔ 성능 저하 - 병목 발생, 병렬성 떨어지므로
- 너무 좁게 잡으면 ➔ Race 발생 - 보호 대상을 놓칠 수 있음
- Lock 사용 후 반드시 해제 - `finally` 블록으로 보장 필요

---

#### 💻 Java/Spring 예시

[`synchronize` 사용]

```java
public synchronized void increment() {
  count++;  // 임계 영역
}
```
- 여러 스레드가 동시에 이 메서드에 접근해도 하나씩만 들어와서 count 를 안전하게 수정

---

#### 🎤 면접 예상 질문
1. 임계 영역이란 무엇인가요?
   - 여러 스레드가 동시에 실행하면 안 되는 코드 블록으로, 공유 자원을 읽거나 쓸 수 있는 코드 영역입니다.
   - 이를 보호하지 않으면 Race Condition 이 발생할 수 있으며, 동기화, 락, 세마포어 등을 통해 상호 배제를 구현해야 합니다.
2. 스레드 동기화 방법에는 어떤 것이 있나요?
   - 대표적으로는 락인 뮤텍스, 세마포어, 모니터, Atomic 연산 등이 있으며,
   - 자바에서는 synchronized 또는 ReentrantLock, AtomicInteger 같은 클래스들이 제공됩니다.
   - 동기화는 임계 영역 보호와 DeadLock 방지 설계가 핵심입니다.
3. 임계 영역 보호 시 주의할 점은?
   - 임계 영역이 너무 넓으면 성능 저하가 발생하고,
   - 너무 좁으면 Race Condition 을 완전히 막지 못할 수 있습니다.
   - 또한, Lock 사용 시 반드시 정상적으로 해제되는지 확인해야 합니다.

