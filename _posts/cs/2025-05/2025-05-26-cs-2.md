---
title: "[CS] 데이터베이스의 기본: 관계 (Relationship)"
date: 2025-05-26 12:14:29 +0900
categories: [CS, 데이터베이스]
tags: [TIL, CS, 데이터베이스의 기본]
---
# CS 4장 데이터베이스
## 📚 4.1 데이터베이스의 기본

### 4.1.6 관계 (Relationship) 

#### 📘 정의
- 두 개 이상의 엔티티(테이블) 간의 논리적인 연관성
- 데이터베이스에서는 외래키를 통해 구현 가능
- ERD 설계에서는 선(라인)으로 표현

---

#### 📌 관계의 3가지 종류

| 종류        | 설명                              | 예시                     |
|-----------|---------------------------------|------------------------|
| **1:1 (일대일)** | **한 엔티티의 레코드**가 다른 엔티티의 레코드 **하나**와만 연결 | 주민번호 <-> 개인정보          |
| **1:N (일대다)** | **한 엔티티의 레코드**가 다른 엔티티의 **여러 레코드**와 연결  | 사용자 <-> 주문             |
| **N:M (다대다)** | **여러 레코드가 서로 다수와 연결**됨 ➔ **중간 테이블** 필요  | 학생 <-> 강의 (수강 테이블로 분리) |

- 1:1, 1:N 관계는 **외래키 (Foreign Key) 설정**으로 관계 표현
- N:M 관계는 **중간 테이블 생성 + 외래 키 2개 설정**

---

#### 🎯 예시

- 쇼핑몰
  - `User` <> `Order` - **1:N** (한 명의 유저가 여러 주문 가능)
  - `Order` <> `OrderItem` - **1:N** (하나의 주문에 여러 상품 포함 가능)
  - `Product` <> `OrderItem` - **1:N** (하나의 상품을 여러 주문에서 이용 가능)

---

#### 🏢 실무에서의 중요성
- **JOIN 조건** - 대부분 관계 기반으로 JOIN 수행
- **성능 최적화** - 관계 설정이 잘못되면 **N + 1 문제**, 조인 누락 발생
- **정규화 설계** - 관계를 통해 테이블 분리 및 구조화
- **데이터 정합성** - 외래키 제약조건을 통해 **관계 무결성** 보장

---

#### 💻 Java/Spring 예시

```java
@Entity
@Table(name = "users")
public class User {
  @Id
  private Long id;

  @OneToMany(mappedBy = "user")
  private List<Order> orders;
}

@Entity
@Table(name = "orders")
public class Order {
  @Id
  private Long id;

  @ManyToOne
  @JoinColumn(name = "user_id")
  private User user;
}

```
- `User` <> `Order` = 1:N 관계
- `@OneToMany`, `@ManyToOne` 을 통해 1:N 관계 설정
- `user_id` 가 `Order` 테이블에서 외래 키 역할

---

#### 🎤 면접 예상 질문
1. 관계형 데이터베이스에서 관계란 무엇인가요? 
   - 두 개 이상의 엔티티 간의 연관성을 의미하며, 보통 외래키를 통해 연결됩니다.
   - 예를 들면 사용자와 주문, 주문과 상품 등의 관계가 있습니다.
2. N:M 관계는 어떻게 구현하나요?
   - 관계형 데이터베이스에서 이를 직접 표현할 수 없기 때문에,
   - 중간 테이블을 만들어 1:N + N:1 관계로 분해한 후 각각의 외래키를 연결해 구현합니다.
3. 1:1 관계는 언제 사용하나요?
   - 보통 한 테이블에 데이터를 모두 넣기 부담스럽거나, 접근 권한이나 확장성을 분리하고 싶을 때 사용합니다.
   - 예를 들면, User 와 UserProfile 테이블의 경우 1:1 관계로 사용합니다.
