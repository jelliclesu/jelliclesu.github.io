---
title: "[CS] 조인의 원리: 중첩 루프 조인 (Nested Loop Join)"
date: 2025-05-30 12:00:51 +0900
categories: [CS, 데이터베이스]
tags: [TIL, CS, 조인의 원리]
---
# CS 4장 데이터베이스
## 📚 4.7 조인의 원리

### 4.7.1 중첩 루프 조인 (Nested Loop Join)

#### 📘 정의
- **두 테이블을 중첩된 반복문 형태로 비교**하며 JOIN 을 수행하는 방식
- 한쪽 테이블의 모든 행에 대해, 다른 테이블의 행을 하나씩 비교하며 조건에 맞는 데이터 찾는 방식

---

#### 📌 예시 상황

```sql
SELECT *
FROM employee e
JOIN department d ON e.dept_id = d.id;
```
- `employee` 의 각 행마다 `department` 를 전부 탐색하며 매칭
  - `employee` 테이블에 1만 개, `department` 테이블에 100 개의 데이터
  - ➡︎ 총 비교 횟수 = 10,000 x 100 = **1,000,000 회**

---

#### 🎯 사용 이유 / 장점
- **단순한 구현** - 가장 기본적이고 보편적인 조인 방식
- **인덱스 사용 가능** - 내부 루프에 인덱스가 걸려 있으면 **속도가 빠름**
- **소량 데이터** - 작은 테이블 간 조인일 경우 오히려 효율적

---

#### ⚠️ 단점
- **성능 저하** - 대량 데이터일 경우 비교 횟수가 **기하급수적으로 증가**
- **비효율** - 인덱스가 없거나 Full Scan 이 필요한 경우 **매우 느림**
- **고비용 쿼리** - 조인 조건이 복잡하거나, 테이블이 크면 최악의 성능

---

#### 🏢 실무 사용 여부
✔️ MySQL 은 기본적으로 이 방식 사용

- 인덱스를 잘 설계하면 충분히 사용 가능
- 대용량 & 인덱스 없을 경우 성능 문제 가능성 높음

---

#### 💻 실행 흐름

```sql
SELECT *
FROM A
JOIN B ON A.key = B.key;
```

```plaintext
for each row in A:              -- 외부 루프
    for each row in B:          -- 내부 루프
        if A.key == B.key:
            join and return
```

---

#### 🎤 면접 예상 질문
1. 중첩 루프 조인이란 무엇인가요?
   - 가장 기본적인 조인 방식으로, 한 테이블의 각 행마다 다른 테이블의 모든 행을 반복 비교하여 조건을 만족하는 결과를 반환합니다.
   - 특히 인덱스가 존재할 경우 내부 루프의 성능이 향상되어 효율적으로 동작할 수 있습니다.
2. 어떤 경우에 중첩 루프 조인을 사용하나요?
   - 인덱스가 있는 조인 키가 있는 경우와, 소량 데이터 간의 조인, 단순한 비교 조건으로 구성된 조인일 경우에 사용합니다.
   - 대용량 테이블이나 인덱스가 없는 경우에는 적합하지 않으며 성능 저하가 발생할 수 있습니다.
