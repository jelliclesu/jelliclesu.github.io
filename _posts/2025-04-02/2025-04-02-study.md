---
title: "í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ ìë°” ì¤‘ê¸‰ ê°•ì˜ - IO, ì–´ë…¸í…Œì´ì…˜, ì“°ë ˆë“œ, ëŒë‹¤ì‹"
date: 2025-04-02 18:22:25 +0900
categories: ["2025-04-02", JAVA]
tags: [TIL, JAVA]
---

# ğŸ“š í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ ìë°” ì¤‘ê¸‰ ê°•ì˜
[í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ìë°” ì¤‘ê¸‰](https://school.programmers.co.kr/learn/courses/9/9-%EC%9E%90%EB%B0%94-%EC%A4%91%EA%B8%89)

## ìë°” IO íŒ¨í‚¤ì§€
- ì…ì¶œë ¥ì„ ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ì™€ í´ë˜ìŠ¤ë“¤

- **Input**: ì…ë ¥, í”„ë¡œê·¸ë¨ ìƒìœ¼ë¡œ ë“¤ì–´ì˜¤ëŠ” ëª¨ë“  ê°’ 
- **Output**: ì¶œë ¥, í”„ë¡œê·¸ë¨ ìƒì—ì„œ ë°–ìœ¼ë¡œ ë‚˜ê°€ëŠ” ëª¨ë“  ê°’

![img.png](/assets/img/2025-04-02/io.png)
- byte ë‹¨ìœ„ ì…ì¶œë ¥: ëª¨ë‘ InputStream ê³¼ OutputStream ì´ë¼ëŠ” ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ ë§Œë“¤ì–´ì§
- char ë‹¨ìœ„ ì…ì¶œë ¥: ëª¨ë‘ Reader ì™€ Writer ë¼ëŠ” ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ ë§Œë“¤ì–´ì§

---

### ë°ì½”ë ˆì´í„° íŒ¨í„´(Decorator Pattern)
- í•˜ë‚˜ì˜ í´ë˜ìŠ¤ë¥¼ ì¥ì‹í•˜ëŠ” ê²ƒì²˜ëŸ¼ ìƒì„±ì¥ì—ì„œ ê°ì‹¸ì„œ ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ê³„ì† ì¶”ê°€í•  ìˆ˜ ìˆë„ë¡ í´ë˜ìŠ¤ë¥¼ ë§Œë“œëŠ” ë°©ì‹

![img.png](/assets/img/2025-04-02/io2.png)
- 4ê°€ì§€ ì¶”ìƒí´ë˜ìŠ¤ë¥¼ ë°›ì•„ë“¤ì´ëŠ” ìƒì„±ì
  - ìˆë‹¤ë©´? ë‹¤ì–‘í•œ ì…ì¶œë ¥ ë°©ë²•ì„ ì œê³µí•˜ëŠ” í´ë˜ìŠ¤ â” **ì¥ì‹í•˜ëŠ” í´ë˜ìŠ¤ (Decorator)**
    - ìƒì„±ìì— ë‹¤ë¥¸ ìŠ¤íŠ¸ë¦¼(InputStream/Reader ë“±)ì„ ë°›ìŒ. ë‹¤ë¥¸ "ì¥ì‹ ëŒ€ìƒ"ì„ ë°›ì•„ì„œ ê°ì‹¸ëŠ” êµ¬ì¡°
  - ì—†ë‹¤ë©´? ì–´ë””ë¡œë¶€í„° ì…ë ¥ë°›ì„ ê²ƒì¸ì§€, ì–´ë””ì— ì“¸ ê²ƒì¸ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” í´ë˜ìŠ¤ â” **ì¥ì‹ ëŒ€ìƒ í´ë˜ìŠ¤**
    - ìƒì„±ìì— "íŒŒì¼"ì´ë‚˜ "ë°°ì—´" ë“±ì˜ ì‹¤ì œ ëŒ€ìƒ

```java
// ì¥ì‹í•˜ëŠ” í´ë˜ìŠ¤
BufferedReader br = new BufferedReader(new FileReader("file.txt"));

// ì¥ì‹ ëŒ€ìƒ í´ë˜ìŠ¤
FileReader fr = new FileReader("file.txt");
```
- BufferedReaderëŠ” Readerë¥¼ ìƒì„±ìë¡œ ë°›ìŒ
  - ì¦‰, ì–´ë–¤ Reader ë“  ë°›ì•„ì„œ ê°ìŒ€ ìˆ˜ ìˆìŒ. ë‹¤ì–‘í•œ ì…ì¶œë ¥ ë°©ë²•ì„ ì œê³µí•  ìˆ˜ ìˆë‹¤ëŠ” ëœ»
- FileReaderëŠ” InputStreamì´ë‚˜ Readerë¥¼ ë°›ì§€ ì•Šê³  "file.txt"ë¼ëŠ” ì‹¤ì œ íŒŒì¼ëª…ì„ ë°›ìŒ
  - ì¦‰, ì…ì¶œë ¥ì˜ ëŒ€ìƒì„ ì§€ì •í•˜ëŠ” í´ë˜ìŠ¤

---

### Byte ë‹¨ìœ„ ì…ì¶œë ¥
- í´ë˜ìŠ¤ì˜ ì´ë¦„ì´ InputStream ì´ë‚˜ OutputStream ìœ¼ë¡œ ëë‚¨

```java

public class ByteIOExam1 {
  public static void main(String[] args){
    FileInputStream fis = null;
    FileOutputStream fos = null;
    try {
      fis = new FileInputStream("src/javaIO/exam/ByteExam1.java");
      fos = new FileOutputStream("byte.txt");
      
      int readData = -1;
      // read() ë©”ì†Œë“œëŠ” ë”ì´ìƒ ì½ì„ ê²Œ ì—†ì„ ë•Œ -1 ë¦¬í„´
      while((readData = fis.read())!= -1){
        fos.write(readData);
      }
    } catch (Exception e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
    }finally{
      try {
        //fisì™€ fosë¥¼ ì‚¬ìš©í•˜ê³  ë‚˜ë©´ closeí•´ì•¼ í•¨
        fos.close();
      } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
      }
      try {
        fis.close();
      } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
      }
    }
  }
}

```

- byte íƒ€ì…ì€	-128 ~ 127ê¹Œì§€ë§Œ í‘œí˜„ ê°€ëŠ¥ (8ë¹„íŠ¸)
- ëª¨ë“  ë°”ì´íŠ¸ ê°’(0~255)ì„ ë‹¤ í‘œí˜„í•˜ê³ , EOF(ë)ì„ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆëŠ” -1ë„ í‘œí˜„í•˜ë ¤ë©´? **int**
- int ëŠ” 4ë°”ì´íŠ¸(32ë¹„íŠ¸), ê°€ì¥ ì™¼ìª½ ë¹„íŠ¸ê°€ ë¶€í˜¸(Sign Bit)
  - 0: ì–‘ìˆ˜ 
  - 1: ìŒìˆ˜

  | ìˆ«ì | ë¹„íŠ¸ í˜•íƒœ |
|----------|----------|
| 5 | 00000000 00000000 00000000 00000101 |
| -1 | 11111111 11111111 11111111 11111111 â† EOFì¼ ë•Œ ë¦¬í„´ë¨ |
| -128 | 11111111 11111111 11111111 10000000 |

- FileInputStreamê³¼ FileOutputStreamì„ ì´ìš©í•˜ì—¬, 1ë°”ì´íŠ¸ì”© ì½ì–´ë“¤ì—¬ 1ë°”ì´íŠ¸ì”© ì €ì¥
  - â” ë§¨ ë 1ë°”ì´íŠ¸(í•˜ìœ„ 8ë¹„íŠ¸) ì— ì½ì–´ë“¤ì¸ 1ë°”ì´íŠ¸ ì €ì¥í•˜ëŠ” ê²ƒ!

#### 512byte ì”© ì½ì–´ë“¤ì´ê¸°

```java
public class ByteIOExam1 {
  public static void main(String[] args){
    //ë©”ì†Œë“œê°€ ì‹œì‘ëœ ì‹œê°„ì„ êµ¬í•˜ê¸° ìœ„í•¨
    long startTime = System.currentTimeMillis();
    FileInputStream fis = null;
    FileOutputStream fos = null;
    try {
      fis = new FileInputStream("src/javaIO/exam/ByteExam1.java");
      fos = new FileOutputStream("byte.txt");

      int readCount = -1;
      byte[] buffer = new byte[512];
      while((readCount = fis.read(buffer))!= -1){
        fos.write(buffer,0,readCount);  // buffer ì˜ 0 ë²ˆì§¸ë¶€í„° readCount ê¹Œì§€ ì“°ê¸°
      }
    } catch (Exception e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
    }finally{
      try {
        fos.close();
      } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
      }
      try {
        fis.close();
      } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
      }
    }
    //ë©”ì†Œë“œê°€ ëë‚¬ì„ë•Œ ì‹œê°„ì„ êµ¬í•˜ê¸° ìœ„í•¨. 
    long endTime = System.currentTimeMillis();
    //ë©”ì†Œë“œë¥¼ ìˆ˜í–‰í•˜ëŠ”ë° ê±¸ë¦° ì‹œê°„ì„ êµ¬í•  ìˆ˜ ìˆìŒ. 
    System.out.println(endTime-startTime);
  }
}
```
![img.png](/assets/img/2025-04-02/io3.png)
- OS ì—ì„œ ë³´í†µ **512byte** ì”© ì½ì–´ì˜´ â” íŒŒì¼ì„ ì½ì–´ì˜¬ ë•Œ 512byte ì˜ ë°°ìˆ˜ë¡œ í¬ê¸°ë¥¼ ì¡ì•„ì£¼ëŠ” ê²Œ ì„±ëŠ¥ìƒ ì¢‹ìŒ

#### try-with-resources ë¸”ëŸ­
- java io ê°ì²´ëŠ” ì¸ìŠ¤í„°ìŠ¤ë¥¼ ë§Œë“¤ê³ , ëª¨ë‘ ì‚¬ìš©í•˜ë ¤ë©´ close() ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•´ì•¼ í•¨
- close() ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šë”ë¼ë„, Exception ì´ ë°œìƒí•˜ì§€ ì•Šì•˜ë‹¤ë©´ ìë™ìœ¼ë¡œ close() ê°€ ë˜ê²Œ í•  ìˆ˜ ìˆëŠ” ë°©ë²•

```java
try(
        //ioê°ì²´ ì„ ì–¸
){
        //ioê°ì²´ ì‚¬ìš©
}catch(Exception ex){
    ex.printStackTrace();
}
```

#### ë‹¤ì–‘í•œ íƒ€ì…ì˜ ì¶œë ¥: DataOutputStream
- ë‹¤ì–‘í•œ íƒ€ì…ìœ¼ë¡œ ì €ì¥í•  ìˆ˜ ìˆëŠ” í´ë˜ìŠ¤

```java
import java.io.DataOutputStream;
import java.io.FileOutputStream;
public class ByteExam3 {
  public static void main(String[] args) {
    try(
      DataOutputStream out = new DataOutputStream(new FileOutputStream("data.txt"));
    ){
      out.writeInt(100);    // ì •ìˆ˜ê°’ìœ¼ë¡œ ì €ì¥
      out.writeBoolean(true);   // boolean ê°’ìœ¼ë¡œ ì €ì¥
      out.writeDouble(50.5);    // double ê°’ìœ¼ë¡œ ì €ì¥
    }catch (Exception e) {
      e.printStackTrace();
    }
  }
}
```

#### ë‹¤ì–‘í•œ íƒ€ì…ì˜ ì…ë ¥: DataInputStream
- ë‹¤ì–‘í•œ íƒ€ì…ì˜ ë°ì´í„°ë¥¼ ì½ì–´ë‚¼ ìˆ˜ ìˆëŠ” í´ë˜ìŠ¤

```java
 import java.io.DataInputStream;
import java.io.FileInputStream;

public class ByteIOExam4 {

  public static void main(String[] args) {
    try(
      DataInputStream out = new DataInputStream(new FileInputStream("data.dat"));
    ){
      int i = out.readInt();    // ì •ìˆ˜ë¥¼ ì½ì–´ë“¤ì´ëŠ” ë©”ì†Œë“œ
      boolean b = out.readBoolean();    // boolean ê°’ì„ ì½ì–´ë“¤ì´ëŠ” ë©”ì†Œë“œ
      double d = out.readDouble();  // double ê°’ì„ ì½ì–´ë“¤ì´ëŠ” ë©”ì†Œë“œ

      System.out.println(i);
      System.out.println(b);
      System.out.println(d);
    }catch(Exception ex){
      ex.printStackTrace();
    }
  }
}
```
âš ï¸ íŒŒì¼ì— ì €ì¥ëœ ìˆœì„œëŒ€ë¡œ ì½ì–´ ë“¤ì—¬ì•¼ í•¨ - int, boolean, double ìˆœìœ¼ë¡œ ì €ì¥í–ˆê¸° ë•Œë¬¸ì— ì½ì„ ë•Œë„ ê°™ì€ ìˆœì„œë¡œ!

---

### Char ë‹¨ìœ„ ì…ì¶œë ¥ 
- í´ë˜ìŠ¤ ì´ë¦„ì´ Reader ë‚˜ Writer ë¡œ ëë‚¨

#### **Console**: í‚¤ë³´ë“œë¡œë¶€í„° í•œ ì¤„ ì…ë ¥ ë°›ì•„ì„œ ì½˜ì†”ì— ì¶œë ¥í•˜ê¸°
```java
import java.io.BufferedReader;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
public class CharIOExam01 {
  public static void main(String[] args) {
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    //í‚¤ë³´ë“œë¡œ ì…ë ¥ë°›ì€ ë¬¸ìì—´ì„ ì €ì¥í•˜ê¸° ìœ„í•´ lineë³€ìˆ˜ë¥¼ ì„ ì–¸               
    String line = null;
    try {
      line = br.readLine();
    } catch (IOException e) {
      e.printStackTrace();
    }
    //ì½˜ì†”ì— ì¶œë ¥ 
    System.out.println(line);
  }
}
```

- System.in : í‚¤ë³´ë“œë¥¼ ì˜ë¯¸ (InputStream)
- BufferedReader : í•œ ì¤„ì”© ì…ë ¥ë°›ê¸° ìœ„í•œ í´ë˜ìŠ¤
- BufferedReader í´ë˜ìŠ¤ì˜ ìƒì„±ìëŠ” InputStream ì„ ì…ë ¥ë°›ì„ ìˆ˜ ìˆëŠ” ìƒì„±ìê°€ ì—†ìŒ â” InputStreamReader í´ë˜ìŠ¤ ì´ìš©

#### **File**: íŒŒì¼ì—ì„œ í•œ ì¤„ì”© ì…ë ¥ë°›ì•„ì„œ íŒŒì¼ì— ì¶œë ¥

```java
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;
public class CharIOExam02 {
  public static void main(String[] args) {
    BufferedReader br = null;
    PrintWriter pw = null;
    try{
      br = new BufferedReader(new FileReader("src/javaIO/exam/CharIOExam02.java"));
      pw = new PrintWriter(new FileWriter("test.txt"));
      String line = null;
      // readLine(): ì½ì–´ë“¤ì¼ ë‚´ìš©ì´ ì—†ìœ¼ë©´ null ë¦¬í„´
      while((line = br.readLine())!= null){
        pw.println(line);
      }
    }catch(Exception e){
      e.printStackTrace();
    }finally {
      pw.close();
      try {
        br.close();
      } catch (IOException e) {
        e.printStackTrace();
      }
    }
  }
}
```

- FileReader: íŒŒì¼ì—ì„œ ì½ê¸° ìœ„í•œ í´ë˜ìŠ¤
- FileWriter: íŒŒì¼ì— ì“°ê¸° ìœ„í•œ í´ë˜ìŠ¤
- PrintWriter: í¸ë¦¬í•˜ê²Œ ì¶œë ¥í•˜ê¸° ìœ„í•œ í´ë˜ìŠ¤
- BufferedReader : í•œ ì¤„ì”© ì…ë ¥ë°›ê¸° ìœ„í•œ í´ë˜ìŠ¤

---

## ì–´ë…¸í…Œì´ì…˜
- Java5 ë¶€í„° ì¶”ê°€ëœ ê¸°ëŠ¥
- í´ë˜ìŠ¤ë‚˜ ë©”ì†Œë“œ ìœ„ì— ë¶™ìŒ **@**(at) ìœ¼ë¡œ ì‹œì‘ ex) @Override
- ì†ŒìŠ¤ì½”ë“œì— ë©”íƒ€ì½”ë“œ(ì¶”ê°€ ì •ë³´)ë¥¼ ì£¼ëŠ” ê²ƒ
- ìë°” ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ê²ƒë„ ìˆê³ , ì‚¬ìš©ìê°€ ì§ì ‘ **Custom ì–´ë…¸í…Œì´ì…˜**ì„ ì‘ì„±í•  ìˆ˜ ìˆìŒ

### Custom ì–´ë…¸í…Œì´ì…˜
1. ì–´ë…¸í…Œì´ì…˜ì„ ì •ì˜í•œë‹¤.
2. ì–´ë…¸í…Œì´ì…˜ì„ í´ë˜ìŠ¤ì—ì„œ ì‚¬ìš©í•œë‹¤. - íƒ€ê²Ÿì— ì ìš©
3. ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•˜ì—¬ ì‹¤í–‰í•œë‹¤.

[Count100ì´ë¼ëŠ” ì–´ë…¸í…Œì´ì…˜ ìƒì„±]

```java
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;

@Retention(RetentionPolicy.RUNTIME)
public @interface Count100 {

}
```
- ì–´ë…¸í…Œì´ì…˜ì„ JVM ì‹¤í–‰ ì‹œ ê°ì§€í•˜ë„ë¡ @Retention(RetentionPolicy.RUNTIME)

["hello"ë¥¼ ì¶œë ¥í•˜ëŠ” hello()ë©”ì†Œë“œë¥¼ ê°€ì§€ëŠ” MyHello ë¼ëŠ” í´ë˜ìŠ¤ ì‘ì„±]

```java
public class MyHello {
  @Count100
  public void hello(){
    System.out.println("hello");
  }
}
```

[MyHello í´ë˜ìŠ¤ë¥¼ ì´ìš©í•˜ëŠ” MyHelloExam í´ë˜ìŠ¤ë¥¼ ì‘ì„±]

```java
import java.lang.reflect.Method;

public class MyHelloExam {
  public static void main(String[] args) {
    MyHello hello = new MyHello();

    try{
      Method method = hello.getClass().getDeclaredMethod("hello");
      if(method.isAnnotationPresent(Count100.class)){
        for(int i = 0; i < 100; i++){
          hello.hello();
        }
      }else{
        hello.hello();
      }
    }catch(Exception ex){
      ex.printStackTrace();
    }
  }
}
```
- MyHello ì˜ hello ë©”ì†Œë“œê°€ @Count100ì–´ë…¸í…Œì´ì…˜ì´ ì„¤ì •ë˜ì–´ ìˆì„ ê²½ìš°, hello()ë©”ì†Œë“œë¥¼ 100ë²ˆ í˜¸ì¶œ

---

## ì“°ë ˆë“œ (Thread)
- ë™ì‹œì— ì—¬ëŸ¬ê°€ì§€ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ê²ƒ

<div style="display: flex; gap: 10px;">
  <img src="/assets/img/2025-04-02/thread.png" alt="ì“°ë ˆë“œ" style="width: 100%;" />
  <img src="/assets/img/2025-04-02/process.png" alt="í”„ë¡œì„¸ìŠ¤" style="width: 100%;" />
</div>

- ì›Œë“œí”„ë¡œì„¸ì„œê°€ í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ë¼ë©´, í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ ì•ˆì—ì„œ ì—¬ëŸ¬ ê°œì˜ íë¦„(ì“°ë ˆë“œ) ê°€ ë™ì‘
  - ex) ê¸€ ì…ë ¥, ë§ì¶¤ë²• ê²€ì‚¬ ë“±ì´ ë™ì‹œì—!

### ì“°ë ˆë“œ ë§Œë“¤ê¸° 
#### 1. Thread í´ë˜ìŠ¤ ìƒì†ë°›ëŠ” ë°©ë²• (extend Thread)
- java.lang.Thread í´ë˜ìŠ¤ ìƒì†
- Thread ê°€ ê°€ì§„ run() ë©”ì†Œë“œ ì˜¤ë²„ë¼ì´ë”©

```java
public class MyThread1 extends Thread {
  String str;
  public MyThread1(String str){
    this.str = str;
  }

  public void run(){
    for(int i = 0; i < 10; i ++){
      System.out.print(str);
      try {
        //ì»´í“¨í„°ê°€ ë„ˆë¬´ ë¹ ë¥´ê¸° ë•Œë¬¸ì— ìˆ˜í–‰ê²°ê³¼ë¥¼ ì˜ í™•ì¸ í•  ìˆ˜ ì—†ì–´ì„œ Thread.sleep() ë©”ì„œë“œë¥¼ ì´ìš©í•´ì„œ ì¡°ê¸ˆì”© 
        //ì‰¬ì—ˆë‹¤ê°€ ì¶œë ¥í•  ìˆ˜ ìˆê²Œí•œë‹¤. 
        Thread.sleep((int)(Math.random() * 1000));
      } catch (InterruptedException e) {
        e.printStackTrace();
      }
    }
  }
}
```
[MyThread1 ì„ ì‚¬ìš©í•˜ëŠ” í´ë˜ìŠ¤]

```java
public class ThreadExam1 {
    public static void main(String[] args) {
        // MyThreadì¸ìŠ¤í„´ìŠ¤ë¥¼ 2ê°œ ë§Œë“­ë‹ˆë‹¤. 
        MyThread1 t1 = new MyThread1("*");
        MyThread1 t2 = new MyThread1("-");

        t1.start();
        t2.start();
        System.out.print("!!!!!");  
    }   
}
```
- Thread ë¥¼ ìƒì† ë°›ì•˜ìœ¼ë¯€ë¡œ MyThread1 ì€ Thread ì„!
- Thread ë¥¼ ìƒì„±í•˜ê³ , start() ë©”ì†Œë“œ í˜¸ì¶œí•´ì•¼ ë™ì‘!

#### 2. Runnable ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„í•˜ëŠ” ë°©ë²• (implements Runnable)
- Runnable ì¸í„°í˜ì´ìŠ¤ê°€ ê°€ì§€ê³  ìˆëŠ” run() ë©”ì†Œë“œë¥¼ êµ¬í˜„
- JAVA ëŠ” **ë‹¨ì¼ ìƒì†**ë§Œ ì§€ì›í•´ì„œ, ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ê³  ìˆì—ˆì„ ê²½ìš° **Thread í´ë˜ìŠ¤ ë˜ ìƒì†ë°›ê¸° ë¶ˆê°€**
  - ì¸í„°í˜ì´ìŠ¤ëŠ” ì—¬ëŸ¬ê°œ êµ¬í˜„í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— Runnable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì„œ Thread ì‘ì„±!

 ```java
public class MyThread2 implements Runnable {
    String str;
    public MyThread2(String str){
        this.str = str;
    }

    public void run(){
        for(int i = 0; i < 10; i ++){
            System.out.print(str);
            try {
                Thread.sleep((int)(Math.random() * 1000));
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        } 
    } 
}
 ```
- MyThread2 ëŠ” Thread ë¥¼ ìƒì†ë°›ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— **Thread ê°€ ì•„ë‹˜!**
  - ê·¸ë ‡ê¸° ë•Œë¬¸ì—, **start() ë©”ì†Œë“œ í˜¸ì¶œ ë¶ˆê°€**
- Thread ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , í•´ë‹¹ ìƒì„±ìì— MyThread2 ë¥¼ ë„£ì–´ì„œ Thread ìƒì„±
  - start() ë©”ì†Œë“œ í˜¸ì¶œ ê°€ëŠ¥

---

### ì“°ë ˆë“œì™€ ê³µìœ  ê°ì²´
![img.png](/assets/img/2025-04-02/thread2.png)

- í•˜ë‚˜ì˜ ê°ì²´ë¥¼ ì—¬ëŸ¬ ê°œì˜ Thread ê°€ ì‚¬ìš©í•œë‹¤ëŠ”/ê°€ì§€ê³ ìˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸

[ê³µìœ ê°ì²´ MusicBox]

```java
public class MusicBox { 
    //ì‹ ë‚˜ëŠ” ìŒì•…!!! ì´ë€ ë©”ì‹œì§€ê°€ 1ì´ˆì´í•˜ë¡œ ì‰¬ë©´ì„œ 10ë²ˆ ë°˜ë³µì¶œë ¥
    public void playMusicA(){
        for(int i = 0; i < 10; i ++){
            System.out.println("ì‹ ë‚˜ëŠ” ìŒì•…!!!");
            try {
                Thread.sleep((int)(Math.random() * 1000));
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        } // for        
    } //playMusicA

    //ìŠ¬í”ˆ ìŒì•…!!!ì´ë€ ë©”ì‹œì§€ê°€ 1ì´ˆì´í•˜ë¡œ ì‰¬ë©´ì„œ 10ë²ˆ ë°˜ë³µì¶œë ¥
    public void playMusicB(){
        for(int i = 0; i < 10; i ++){
            System.out.println("ìŠ¬í”ˆ ìŒì•…!!!");
            try {
                Thread.sleep((int)(Math.random() * 1000));
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        } // for        
    } //playMusicB
    //ì¹´í˜ ìŒì•…!!! ì´ë€ ë©”ì‹œì§€ê°€ 1ì´ˆì´í•˜ë¡œ ì‰¬ë©´ì„œ 10ë²ˆ ë°˜ë³µì¶œë ¥
    public void playMusicC(){
        for(int i = 0; i < 10; i ++){
            System.out.println("ì¹´í˜ ìŒì•…!!!");
            try {
                Thread.sleep((int)(Math.random() * 1000));
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        } // for        
    } //playMusicC  
}
```

[MusicBox ë¥¼ ê°€ì§€ëŠ” Thread ê°ì²´ MusicPlayer]

```java
public class MusicPlayer extends Thread{
  int type;
  MusicBox musicBox;
  // ìƒì„±ìë¡œ ë¶€í„° musicBoxì™€ ì •ìˆ˜ë¥¼ í•˜ë‚˜ ë°›ì•„ë“¤ì—¬ì„œ í•„ë“œë¥¼ ì´ˆê¸°í™”
  public MusicPlayer(int type, MusicBox musicBox){
    this.type = type;
    this.musicBox = musicBox;
  }
  // typeì´ ë¬´ì—‡ì´ëƒì— ë”°ë¼ì„œ musicBoxê°€ ê°€ì§€ê³  ìˆëŠ” ë©”ì†Œë“œê°€ ë‹¤ë¥´ê²Œ í˜¸ì¶œ
  @Override
  public void run(){
    switch(type){
      case 1 : musicBox.playMusicA(); break;
      case 2 : musicBox.playMusicB(); break;
      case 3 : musicBox.playMusicC(); break;
    }
  }
}
```

[MusicBoxì™€ MusicPlayerë¥¼ ì´ìš©í•˜ëŠ” MusicBoxExam1 í´ë˜ìŠ¤]

```java
public class MusicBoxExam1 {

  public static void main(String[] args) {
    // MusicBox ì¸ìŠ¤í„´ìŠ¤
    MusicBox box = new MusicBox();

    MusicPlayer kim = new MusicPlayer(1, box);
    MusicPlayer lee = new MusicPlayer(2, box);
    MusicPlayer kang = new MusicPlayer(3, box);

    // MusicPlayerì“°ë ˆë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. 
    kim.start();
    lee.start();
    kang.start();
  }
}
```

---

### ë™ê¸°í™” ë©”ì†Œë“œì™€ ë™ê¸°í™” ë¸”ë¡

- ê³µìœ  ê°ì²´ê°€ ê°€ì§„ ë©”ì†Œë“œë¥¼ ë™ì‹œì— í˜¸ì¶œë˜ì§€ ì•Šë„ë¡ í•˜ëŠ” ë°©ë²• â” ë©”ì†Œë“œ ì•ì— **synchronized** ë¥¼ ë¶™í˜

```java
public synchronized void playMusicA(){
    for(int i = 0; i < 10; i ++){
        System.out.println("ì‹ ë‚˜ëŠ” ìŒì•…!!!");
        try {
            Thread.sleep((int)(Math.random() * 1000));
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    } // for        
} //playMusicA
```

- ì—¬ëŸ¬ ê°œì˜ Thread ë“¤ì´ ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•  ë•Œ ë¨¼ì € í˜¸ì¶œí•œ ë©”ì†Œë“œê°€ ê°ì²´ì˜ ì‚¬ìš©ê¶Œ(**Monitoring Lock**) ì„ ì–»ìŒ
- Monitoring Lock ì€ ë©”ì†Œë“œ ì‹¤í–‰ì´ ì¢…ë£Œë˜ê±°ë‚˜, wait() ì™€ ê°™ì€ ë©”ì†Œë“œë¥¼ ë§Œë‚˜ê¸° ì „ê¹Œì§€ ìœ ì§€
- synchronized ë¥¼ ë¶™íˆì§€ ì•Šì€ ë©”ì†Œë“œëŠ” ë‹¤ë¥¸ ì“°ë ˆë“œë“¤ì´ synchronized ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•˜ë©´ì„œ Monitoring Lock ì„ íšë“í–ˆë‹¤ í•˜ë”ë¼ë„, ê·¸ê²ƒê³¼ ìƒê´€ì—†ì´ ì‹¤í–‰

```java
public void playMusicB(){
    for(int i = 0; i < 10; i ++){
        synchronized(this){
            System.out.println("ìŠ¬í”ˆ ìŒì•…!!!");
        }
        try {
            Thread.sleep((int)(Math.random() * 1000));
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    } // for        
} //playMusicB
```
- synchronized ë¥¼ ë©”ì†Œë“œì— ë¶™í˜€ì„œ ì‚¬ìš©í•  ê²½ìš°, ë©”ì†Œë“œì˜ ì½”ë“œê°€ ê¸¸ì–´ì§€ë©´ ë§ˆì§€ë§‰ì— ëŒ€ê¸°í•˜ëŠ” ì“°ë ˆë“œê°€ ë„ˆë¬´ ì˜¤ë˜ ê¸°ë‹¤ë¦¼
  - ë¬¸ì œê°€ ìˆì„ ê²ƒ ê°™ì€ ë¶€ë¶„ì— synchronized ë¸”ë¡ì„ ì‚¬ìš©!

---

### ì“°ë ˆë“œì™€ ìƒíƒœ ì œì–´
![img.png](/assets/img/2025-04-02/thread3.png)

- ì“°ë ˆë“œê°€ 3ê°œê°€ ìˆë‹¤ë©´ JVM ì€ ì‹œê°„ì„ ì˜ê²Œ ìª¼ê°  í›„ì— í•œë²ˆì€ ì“°ë ˆë“œ1, í•œë²ˆì€ ì“°ë ˆë“œ2, í•œë²ˆì€ ì“°ë ˆë“œ3ì„ ì‹¤í–‰
- ì´ê²ƒì´ ë¹ ë¥´ê²Œ ì¼ì–´ë‚˜ë‹ˆ ì“°ë ˆë“œê°€ ëª¨ë‘ ë™ì‘í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ëŠ” ê²ƒ!

![img_2.png](/assets/img/2025-04-02/thread4.png)
#### Thread ìƒëª…ì£¼ê¸° (6ê°€ì§€ ìƒíƒœ)

| ìƒíƒœ | ì„¤ëª… | ì§„ì… ì¡°ê±´ | ë¹ ì ¸ë‚˜ì˜¤ëŠ” ì¡°ê±´ |
|------|------|------------|------------------|
| **New** | ìŠ¤ë ˆë“œ ê°ì²´ ìƒì„±ë§Œ ëœ ìƒíƒœ | `new Thread()` | `start()` í˜¸ì¶œ ì‹œ `Runnable`ë¡œ ì´ë™ |
| **Runnable** | ì‹¤í–‰ ê°€ëŠ¥í•œ ìƒíƒœ (CPU í• ë‹¹ ëŒ€ê¸°) | `start()` í˜¸ì¶œ<br>`sleep()`, `wait()` ì¢…ë£Œ í›„ | JVMì´ ìŠ¤ì¼€ì¤„ë§í•˜ë©´ `Running`ìœ¼ë¡œ (JVM ë‚´ë¶€ì ìœ¼ë¡œ ê´€ë¦¬ë¨) |
| **Running** | ì‹¤ì œë¡œ CPUë¥¼ ë°›ì•„ ì‹¤í–‰ ì¤‘ì¸ ìƒíƒœ | `Runnable` ìƒíƒœ ì¤‘ ì„ íƒ | `yield()`, `sleep()`, `wait()`, `join()` í˜¸ì¶œ ë˜ëŠ” `run()` ì¢…ë£Œ |
| **Blocked** | ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ ë½ì„ ì¡ê³  ìˆì–´ ì§„ì… ë¶ˆê°€í•œ ìƒíƒœ | `synchronized` ë¸”ë¡ì— ì§„ì… ì‹œë„í•  ë•Œ, ë½ì´ ì´ë¯¸ ì ìœ ëœ ê²½ìš° | ë½ì„ ì‚¬ìš©í•˜ë˜ ìŠ¤ë ˆë“œê°€ ë½ì„ ë°˜ë‚©í•˜ë©´ `Runnable`ë¡œ ì´ë™ |
| **Waiting** | ë¬´í•œ ëŒ€ê¸° ìƒíƒœ | `wait()`, `join()` í˜¸ì¶œ ì‹œ | `notify()`, `notifyAll()`ë¡œ ê¹¨ì–´ë‚˜ë©´ `Runnable`ë¡œ ì´ë™ |
| **Timed Waiting** | ì¼ì • ì‹œê°„ ë™ì•ˆ ëŒ€ê¸° | `sleep(ms)`, `wait(ms)`, `join(ms)` í˜¸ì¶œ ì‹œ | ì‹œê°„ì´ ì§€ë‚˜ë©´ ìë™ìœ¼ë¡œ `Runnable`ë¡œ ì´ë™ |
| **Terminated (Dead)** | ìŠ¤ë ˆë“œ ì‹¤í–‰ ì¢…ë£Œ ìƒíƒœ | `run()` ë©”ì„œë“œê°€ ëë‚˜ê±°ë‚˜ ì˜ˆì™¸ ë°œìƒ ì‹œ | ì¢…ë£Œë˜ì—ˆê¸° ë•Œë¬¸ì— ìƒíƒœ ì´ë™ ì—†ìŒ |


[Runnable -> Running ìƒíƒœ íë¦„]
```scss
[New] --start()--> [Runnable] --(CPU í• ë‹¹ ì‹œ JVM ê²°ì •)--> [Running]
```

#### ë©”ì„œë“œë³„ ìƒíƒœ ì „ì´ ìš”ì•½

| ë©”ì„œë“œ | í˜„ì¬ ìƒíƒœ | ì „ì´ ìƒíƒœ | ì„¤ëª… |
|--------|-----------|------------|------|
| `start()` | New | Runnable | ìŠ¤ë ˆë“œë¥¼ ì‹¤í–‰ ê°€ëŠ¥í•œ ìƒíƒœë¡œ ë§Œë“¦ |
| `yield()` | Running | Runnable | CPU ì–‘ë³´ (ë‹¤ì‹œ Runnable ìƒíƒœ) |
| `sleep(ms)` | Running | Timed Waiting | ì¼ì • ì‹œê°„ ë™ì•ˆ ì ë“¦ |
| `wait()` | Running | Waiting | ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ `notify()`í•  ë•Œê¹Œì§€ ëŒ€ê¸° |
| `wait(ms)` | Running | Timed Waiting | ì§€ì •í•œ ì‹œê°„ ë™ì•ˆ ëŒ€ê¸° |
| `join()` | Running | Waiting | ëŒ€ìƒ ìŠ¤ë ˆë“œê°€ ëë‚  ë•Œê¹Œì§€ ëŒ€ê¸° |
| `join(ms)` | Running | Timed Waiting | ì§€ì •í•œ ì‹œê°„ ë™ì•ˆ join |
| `notify()` | Waiting | Runnable | `wait()` ì¤‘ì¸ ìŠ¤ë ˆë“œë¥¼ ê¹¨ì›€ |
| `run()` ì¢…ë£Œ | Running | Terminated | ì‘ì—… ì™„ë£Œ ì‹œ ì¢…ë£Œ |
| `synchronized` ë¸”ë¡ ì§„ì… ì‹œ ë½ ì ìœ  ì¤‘ | Runnable | Blocked | ë½ í•´ì œë  ë•Œê¹Œì§€ ëŒ€ê¸° |

- wait() ì™€ notify() ëŠ” ë™ê¸°í™”ëœ ë¸”ë¡ ì•ˆì—ì„œ ì‚¬ìš©í•´ì•¼ í•¨
- wait() ë¥¼ ë§Œë‚˜ê²Œ ë˜ë©´ í•´ë‹¹ ì“°ë ˆë“œê°€ ëª¨ë‹ˆí„°ë§ ë½ì— ëŒ€í•œ ê¶Œí•œì„ ê°€ì§€ê³  ìˆë‹¤ë©´ ê·¸ ê¶Œí•œì„ ë†“ê³  ëŒ€ê¸°í•¨

---

### ë°ëª¬ ì“°ë ˆë“œ (Daemon Thread)
- ë³´í†µ ë¦¬ëˆ…ìŠ¤ì™€ ê°™ì€ ìœ ë‹‰ìŠ¤ ê³„ì—´ì˜ ìš´ì˜ì²´ì œì—ì„œ ë°±ê·¸ë¼ìš´ë“œë¡œ ë™ì‘í•˜ëŠ” í”„ë¡œê·¸ë¨
- ìë°” í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ ë•Œ ë°±ê·¸ë¼ìš´ë“œì—ì„œ íŠ¹ë³„í•œ ì‘ì—…ì„ ì²˜ë¦¬í•˜ê²Œ í•˜ëŠ” ìš©ë„
- ì¼ë°˜ ì“°ë ˆë“œ(main ë“±) ê°€ ëª¨ë‘ ì¢…ë£Œë˜ë©´ ê°•ì œì ìœ¼ë¡œ ì¢…ë£Œ

```java
// Runnableì„ êµ¬í˜„í•˜ëŠ” DaemonThreadí´ë˜ìŠ¤ë¥¼ ì‘ì„±
public class DaemonThread implements Runnable {

  // ë¬´í•œë£¨í”„ì•ˆì—ì„œ 0.5ì´ˆì”© ì‰¬ë©´ì„œ ë°ëª¬ì“°ë ˆë“œê°€ ì‹¤í–‰ì¤‘ì…ë‹ˆë‹¤ë¥¼ ì¶œë ¥í•˜ë„ë¡ run()ë©”ì†Œë“œë¥¼ ì‘ì„±
  @Override
  public void run() {
    while (true) {
      System.out.println("ë°ëª¬ ì“°ë ˆë“œê°€ ì‹¤í–‰ì¤‘ì…ë‹ˆë‹¤.");

      try {
        Thread.sleep(500);

      } catch (InterruptedException e) {
        e.printStackTrace();
        break; //Exceptionë°œìƒì‹œ while ë¬¸ ë¹ ì°Œë„ë¡ 
      }
    }
  }

  public static void main(String[] args) {
    // Runnableì„ êµ¬í˜„í•˜ëŠ” DaemonThreadë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•˜ì—¬ Thread ìƒì„±
    Thread th = new Thread(new DaemonThread());
    // ë°ëª¬ì“°ë ˆë“œë¡œ ì„¤ì •
    th.setDaemon(true);
    // ì“°ë ˆë“œë¥¼ ì‹¤í–‰
    th.start();

    // ë©”ì¸ ì“°ë ˆë“œê°€ 1ì´ˆë’¤ì— ì¢…ë£Œë˜ë„ë¡ ì„¤ì •. 
    // ë°ëª¬ì“°ë ˆë“œëŠ” ë‹¤ë¥¸ ì“°ë ˆë“œê°€ ëª¨ë‘ ì¢…ë£Œë˜ë©´ ìë™ì¢…ë£Œ.
    try {
      Thread.sleep(1000);
    } catch (InterruptedException e) {
      e.printStackTrace();
    }
    System.out.println("ë©”ì¸ ì“°ë ˆë“œê°€ ì¢…ë£Œë©ë‹ˆë‹¤. ");
  }
}
```

---

## ëŒë‹¤ì‹
- ìµëª… ë©”ì†Œë“œë¼ê³ ë„ í•¨
- JAVA ëŠ” ë©”ì†Œë“œë§Œ ì „ë‹¬í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ì—†ì—ˆê¸° ë•Œë¬¸ì— ë§¤ë²ˆ ê°ì²´ë¥¼ ìƒì„±í•´ì„œ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬í•´ì•¼ í–ˆìŒ
  - ì´ê±¸ í•´ê²°í•œ ê²ƒì´ **ëŒë‹¤í‘œí˜„ì‹**

### í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤
- ì¸í„°í˜ì´ìŠ¤ ì¤‘ì—ì„œ ë©”ì†Œë“œë¥¼ í•˜ë‚˜ë§Œ ê°€ì§€ê³  ìˆëŠ” ì¸í„°í˜ì´ìŠ¤
- ex) ì“°ë ˆë“œë¥¼ ë§Œë“¤ ë•Œ ì‚¬ìš©í•˜ëŠ” Runnable ì¸í„°í˜ì´ìŠ¤ì˜ ê²½ìš° run() ë©”ì†Œë“œ í•˜ë‚˜ë§Œ ê°€ì§€ê³  ìˆìŒ

[Runnable ì„ ì´ìš©í•˜ì—¬ ì“°ë ˆë“œë¥¼ ë§Œë“œëŠ” ë°©ë²•]
```java
public class LambdaExam1 {

  public static void main(String[] args) {
    new Thread(new Runnable(){public void run(){
      for(int i = 0; i < 10; i++){
        System.out.println("hello");
      }
    }}).start();
  }
}
```
- run() ë©”ì†Œë“œë§Œ ì „ë‹¬í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— Runnable ê°ì²´ë¥¼ ë§Œë“¤ì–´ì„œ ì „ë‹¬

[ëŒë‹¤ì‹ì„ ì´ìš©í•´ ìˆ˜ì •í•œ ì½”ë“œ]

```java
public class LambdaExam1 {
  public static void main(String[] args) {
    new Thread(()->{
      for(int i = 0; i < 10; i++){
        System.out.println("hello");
      }
    }).start();
  }
}
```
- **() -> { ... }** ì´ ë¶€ë¶„ì´ ëŒë‹¤ì‹ 
- JVM ì€ Thread ìƒì„±ìë¥¼ ë³´ê³  ëŒë‹¤ì‹ì´ ë¬´ì—‡ì¸ì§€ ëŒ€ìƒì„ ì¶”ë¡ 
  - Thread ìƒì„±ì api ë¥¼ ë³´ë©´ Runnable ì¸í„°í˜ì´ìŠ¤ë¥¼ ë°›ì•„ë“¤ì´ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŒ
  - ìë™ìœ¼ë¡œ Runnable ì„ êµ¬í˜„í•˜ëŠ” ê°ì²´ë¡œ ë§Œë“¤ì–´ì„œ ë§¤ê°œë³€ìˆ˜ë¡œ ë„£ì–´ì¤Œ

---

### ê¸°ë³¸ë¬¸ë²•
**(ë§¤ê°œë³€ìˆ˜ ëª©ë¡) -> {ì‹¤í–‰ë¬¸}**

[2ê°œì˜ ê°’ì„ ë¹„êµí•˜ëŠ” compareTo() ë©”ì†Œë“œë¥¼ ê°€ì§„ Compare ì¸í„°í˜ì´ìŠ¤]

```java
public interface Compare{
  public int compareTo(int value1, int value2);
}
```

[Compare ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•˜ëŠ” í´ë˜ìŠ¤]

```java
public class CompareExam {
  public static void exec(Compare compare){
    int k = 10;
    int m = 20;
    int value = compara.compareTo(k, m);
    System.out.println(value);
  }
  public static void main(String[] args) {
    exec((i, j)->{
      return i - j;
    }); }

}
```
