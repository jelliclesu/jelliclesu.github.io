---
title: "[JAVA] ë°±ì¤€ Gold IV - N-Queen(9663)"
date: 2025-06-30 12:13:38 +0900
categories: [Algorithm, ë°±ì¤€]
tags: [TIL, Algorithm]
---
# ì½”ë”©í…ŒìŠ¤íŠ¸ ë¬¸ì œ í’€ì´

## ğŸ“˜ ë¬¸ì œ ì œëª©
[ë²¡ì¤€ - N-Queen](https://www.acmicpc.net/problem/9663)

### ğŸ§  ë¬¸ì œ ì´í•´
- N x N ì²´ìŠ¤íŒ ìœ„ì— í€¸ N ê°œë¥¼ ì„œë¡œ ê³µê²©í•  ìˆ˜ ì—†ê²Œ ë†“ëŠ” ë¬¸ì œ 
- í€¸ì€ ìƒí•˜ì¢Œìš°, ëŒ€ê°ì„  ëª¨ë“  ë°©í–¥ìœ¼ë¡œ ì›í•˜ëŠ” ë§Œí¼ ì´ë™ ê°€ëŠ¥ 
- ë‹¨, ë³¸ì¸ì˜ ê¸°ë¬¼ì„ ë›°ì–´ë„˜ì„ ìˆ˜ ì—†ìŒ

1. í•œ í–‰ì— í•˜ë‚˜ì”© (i)
2. í•œ ì—´ì— í•˜ë‚˜ì”© (j != i)
3. í•œ ëŒ€ê°ì„ ì— í•˜ë‚˜ë§Œ ì¡´ì¬ 
   - ê¸°ì¡´ì— ì„ íƒëœ (x, y)
   - abs(x - i) != abs(y - j) 

âœš ëŒ€ê°ì„ ì€ i + j ê°€ ê°™ë˜ê°€ i - j ê°€ ê°™ìŒ 
-> ì¦‰, i + j í˜¹ì€  i - j ê°€ true ì´ë©´ ê°™ì€ ëŒ€ê°ì„ ì„

---

### âœï¸ ì²« ìŠˆë„ ì½”ë“œ

```plaintext
queen():
  !visitedCol[j]:
    list :
      abs(x - i) == abs(y - j):
        inLine = true;
    !inLine:
      visited[j] = true;
      queen()
      visited[j] = false;
```

---

### 1ï¸âƒ£ ì²« ì½”ë“œ

```java
import java.util.*;

public class Main {
    public static int N;
    public static boolean[] visitedRow;
    public static boolean[] visitedCol;
    public static ArrayList<int[]> list = new ArrayList<>();
    public static int count;

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        N = sc.nextInt();
        visitedRow = new boolean[N];
        visitedCol = new boolean[N];
        
        queen(0);
        System.out.println(count);
    }

    private static void queen(int row) {
        if (row == N) {
            if (list.size() == N) {
                count++;
            }
            return;
        }

        for (int j = 0; j < N; j++) {
            if (!visitedCol[j]) {
                boolean inLine = false;
                if (!list.isEmpty()) {
                    for (int[] arr : list) {
                        if (Math.abs(arr[0] - row) == Math.abs(arr[1] - j)) {
                            inLine = true;
                            break;
                        }
                    }
                }
                if (!inLine) {
                    visitedCol[j] = true;
                    list.add(new int[]{row, j});
                    queen(row + 1);
                    list.remove(list.size() - 1);
                    visitedCol[j] = false;
                }
            }
        }
    }
}
```

- ì˜ˆì‹œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ëŠ” ì˜ ë˜ëŠ”ë° ë©”ëª¨ë¦¬ ì´ˆê³¼
- ì°¾ì•„ë³´ë‹ˆ `list.remove` ê°€ ë©”ëª¨ë¦¬ ì˜¤ë²„í—¤ë“œ ì´ˆë˜í•  ìˆ˜ ìˆë‹¤ëŠ” ì˜ê²¬ì´ ìˆìŒ
- ëŒ€ê°ì„  íƒìƒ‰í•˜ëŠ” ê²ƒë„ `boolean` ìœ¼ë¡œ í•˜ë©´ ë©”ëª¨ë¦¬ ë‚­ë¹„ ì¤„ì¼ ìˆ˜ ìˆìŒ

---

### ğŸ” ì°¸ê³ í•œ ë¶€ë¶„

```java
visitedDiag1 = new boolean[2 * N - 1];
visitedDiag2 = new boolean[2 * N - 1];

!visitedCol[col] && !visitedDiag1[row - col + (N - 1)] && !visitedDiag2[row + col]
```
- `\` ë°©í–¥ ëŒ€ê°ì„ ì€ `row` - `col` ì˜ ê°’ì´ ê°™ìŒ -> `row` - `col` ì€ ìŒìˆ˜ê°€ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ N - 1 ë§Œí¼ ë”í•´ì„œ ì–‘ìˆ˜ë¡œ!
- `/` ë°©í–¥ ëŒ€ê°ì„ ì€ `row` + `col` ì˜ ê°’ì´ ê°™ìŒ
- ë°°ì—´ í¬ê¸°ëŠ” `row` + `col` -> 2N - 1 ë¡œ ì„¤ì •

---

### âœ… ì „ì²´ ì½”ë“œ
```java
import java.util.*;

public class Main {
    public static int N;
    public static boolean[] visitedCol;
    public static boolean[] visitedDiag1;
    public static boolean[] visitedDiag2;
    public static int count = 0;

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        N = sc.nextInt();
        visitedCol = new boolean[N];
        visitedDiag1 = new boolean[2 * N - 1];
        visitedDiag2 = new boolean[2 * N - 1];
        
        queen(0);
        System.out.println(count);
    }

    private static void queen(int row) {
        if (row == N) {
            count++;
            return;
        }

        for (int col = 0; col < N; col++) {
            if (!visitedCol[col] && !visitedDiag1[row - col + (N - 1)] && !visitedDiag2[row + col]) {
                visitedCol[col] = true;
                visitedDiag1[row - col + (N - 1)] = true;
                visitedDiag2[row + col] = true;

                queen(row + 1);

                visitedCol[col] = false;
                visitedDiag1[row - col + (N - 1)] = false;
                visitedDiag2[row + col] = false;
            }
        }
    }
}
```
