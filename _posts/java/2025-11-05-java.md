---
title: "[Java] 얕은 복사(Shallow Copy) 와 깊은 복사(Deep Copy)"
date: 2025-11-05 17:23:57 +0900
categories: [매일메일, JAVA]
tags: [TIL, JAVA]
---
# 얕은 복사와 깊은 복사

## 구분 기준

자바에서 객체를 복사할 때, 다음 기준에 따라 구분

- **객체의 참조를 그대로 복사**하느냐,
- **객체 내부의 필드까지 새로 생성해서 복사**하느냐

### 얇은 복사 (Shallow Copy)

> 객체 자체만 복사하고, 내부에 포함된 참조 타입(객체)은 같은 인스턴스 공유

### 깊은 복사 (Deep Copy)

> 객체뿐 아니라 내부 참조 객체도 모두 새로 생성하여 완전히 독립적인 복제본 생성

---

## 코드 예시

- Book
    - `String name` (책의 이름)
    - `Author author` (저자)
- Author
    - `String name` (저자 이름)

### 클래스 정의

```java
class Book {

    private String name;      // 책 이름
    private Author author;    // 저자

    public Book(String name, Author author) {
        this.name = name;
        this.author = author;
    }

    // 얕은 복사
    public Book shallowCopy() {
        return new Book(this.name, this.author); // Author 공유
    }

    // 깊은 복사
    public Book deepCopy() {
        Author copiedAuthor = new Author(this.author.getName());
        return new Book(this.name, copiedAuthor); // Author 새로 생성
    }

    public void changeAuthor(String name) { // 저자 이름 변경
        author.setName(name);
    }

    @Override
    public String toString() {
        return "Book name : " + name + ", " + author;
    }

    // 내부 클래스
    static class Author {
        private String name; // 저자 이름

        public Author(String name) {
            this.name = name;
        }

        public String getName() { // 저자 이름 반환
		        return name;
        }

        public void setName(String name) { // 저자 이름 변경
		        this.name = name;
        }

        @Override
        public String toString() {
            return "Author : " + name;
        }
    }

}
```

### 메인

```java
public static void main(String[] args) {
    Author author1 = new Author("조슈아 블로크");
    Book book1 = new Book("이펙티브 자바", author1);

    // 얕은 복사 후 변경
    Book shallowCopyBook = book1.shallowCopy();
    shallowCopyBook.changeAuthor("Joshua Bloch");

		// 얕은 복사 결과 출력
    System.out.println("After shallow copy and change:");
    System.out.println("Original book1: " + book1);
    System.out.println("Shallow copied book: " + shallowCopyBook);

    Author author2 = new Author("마틴 파울러");
    Book book2 = new Book("리팩터링", author2);

    // 깊은 복사 후 변경
    Book deepCopyBook = book2.deepCopy();
    deepCopyBook.changeAuthor("Martin Fowler");

		// 깊은 복사 결과 출력
    System.out.println("\nAfter deep copy and change:");
    System.out.println("Original book2: " + book2);
    System.out.println("Deep copied book: " + deepCopyBook);
}
```

### 출력 결과

```yaml
After shallow copy and change:
Original book1: Book name : 이펙티브 자바, Author : Joshua Bloch
Shallow copied book: Book name : 이펙티브 자바, Author : Joshua Bloch

After deep copy and change:
Original book2: Book name : 리팩터링, Author : 마틴 파울러
Deep copied book: Book name : 리팩터링, Author : Martin Fowler
```

#### **얕은 복사**

- `Book` 객체는 새로 생성되었지만, 내부의 `Author` 필드는 원본 객체와 동일한 참조 공유

    → `shallowCopyBook` 의 저자를 변경하면, 원본 `book1` 의 저자도 함께 변경

- ⇒ 두 `Book` 객체가 같은 `Author` 인스턴스 참조

#### **깊은 복사**

- `Book` 과 `Author` 모두 새로운 객체로 생성되어 완전히 독립적인 복제본

    → `deepCopyBook` 의 저자를 변경해도, 원본 `book2` 의 저자는 변경되지 않음 

- ⇒ 두 `Book` 객체가 서로 다른 `Author` 인스턴스 가짐

---

## 요약 정리

| 구분 | 얕은 복사 (Shallow Copy) | 깊은 복사 (Deep Copy) |
| --- | --- | --- |
| **복사 범위** | 객체의 **참조만 복사** | 객체 내부의 **모든 참조 객체까지 새로 복사** |
| **참조 관계** | 원본과 복사본이 **같은 객체** 참조 | 원본과 복사본이 **서로 다른 객체** 참조 |
| **데이터 독립성** | ❌ (하나 수정 시 다른 객체도 영향) | ✅ (완전히 독립적) |
| **성능** | 빠름 (참조만 복사) | 느림 (객체 새로 생성) |
| **사용 예시** | 변경이 없는 객체 복제, 캐싱 등 | 객체 상태를 완전히 분리해야 하는 경우 (예: DTO 변환, 스냅샷) |

---

참조: [maeil-mail 매일메일 - 얕은 복사와 깊은 복사에 대해서 설명해주세요.](https://www.maeil-mail.kr/question/62)
