---
title: "[CS] λ””μμΈ ν¨ν„΄: μ „λµ ν¨ν„΄ (Strategy Pattern)"
date: 2025-04-04 17:58:26 +0900
categories: ["2025-04-04", CS]
tags: [TIL, CS]
---
# CS
## π“ 1.1 λ””μμΈ ν¨ν„΄

### 1.1.3 μ „λµ ν¨ν„΄ (Strategy Pattern)

#### μ •μ
- **μ•κ³ λ¦¬μ¦μ„ μΈν„°νμ΄μ¤λ΅ ν†µν•©ν•κ³ , μ‹¤ν–‰ μ‹μ μ—μ„ μ „λµμ„ μ„ νƒν•λ” ν¨ν„΄**  

- **ν–‰μ„(Behavioral)** λ””μμΈ ν¨ν„΄μΌλ΅, μ•κ³ λ¦¬μ¦μ„ ν•λ‚μ "μ „λµ"μΌλ΅ μΊ΅μν™”ν•μ—¬,  
  **μƒν™©μ— λ”°λΌ μ•κ³ λ¦¬μ¦(μ „λµ)μ„ μ„ νƒν•΄μ„ μ‚¬μ©**ν•  μ μκ² ν•λ” ν¨ν„΄
- μ¦‰, μ‹¤ν–‰ μ‹μ μ—μ„ μ „λµμ„ μ„ νƒν•κ±°λ‚ κµμ²΄ν•  μ μκ² λ§λ“λ” κ²ƒ

---

#### μμ‹ μƒν™©
1. κ²°μ  λ°©λ²• μ„ νƒ
   - μΉ΄λ“ κ²°μ , μΉ΄μΉ΄μ¤νμ΄, ν† μ¤νμ΄ λ“± μƒν™©μ— λ”°λΌ λ°©λ²•(μ „λµ)μ„ μ„ νƒν•΄μ•Ό ν•¨
2. ν• μΈ μ •μ±… μ μ©
   - VIP κ³ κ° ν• μΈ, μΌλ° κ³ κ° ν• μΈ, μ •μ•΅ ν• μΈ λ“± λ‹¤μ–‘ν• ν• μΈ μ •μ±…μ΄ μμ„ λ•
3. λ°μ΄ν„° μ •λ ¬ μ•κ³ λ¦¬μ¦
   - μƒν™©μ— λ”°λΌ ν€µμ •λ ¬, λ³‘ν•©μ •λ ¬, λ²„λΈ”μ •λ ¬ λ“±μ„ μ„ νƒ
4. Spring Security μ PasswordEncoder
   - SHA-256, BCrypt λ“± μ•”νΈν™” μ „λµμ„ μ„ νƒν•  λ•

---

#### μ‚¬μ© μ΄μ  / μ¥μ 
1. μ „λµμ„ μ‰½κ² κµμ²΄ν•  μ μμ
   - **if-else μ—†μ΄ λ™μ **μΌλ΅ μ „λµμ„ μ„ νƒ κ°€λ¥
2. OCP(κ°λ°©-νμ‡„ μ›μΉ™) μ¤€μ
   - μƒλ΅μ΄ μ „λµ μ¶”κ°€ μ‹ **κΈ°μ΅΄ μ½”λ“ λ³€κ²½ λ¶ν•„μ”**
3. μ¤‘λ³µ μ½”λ“ μ κ±° λ° κ΄€μ‹¬μ‚¬ λ¶„λ¦¬ (SRP)
   - μ „λµκ³Ό μ‚¬μ©ν•λ” ν΄λμ¤μ μ±…μ„μ„ λ¶„λ¦¬ν•μ—¬ κ΄€λ¦¬

---

#### λ‹¨μ 
1. ν΄λμ¤ μ μ¦κ°€
   - μ „λµλ§λ‹¤ λ³„λ„μ ν΄λμ¤ ν•„μ”
2. μ „λµμ΄ λ„λ¬΄ λ§μ•„μ§€λ©΄ λ³µμ΅μ„± μ¦κ°€
   - κ΄€λ¦¬ν•  μ „λµμ΄ λ§μ•„μ§€λ©΄ μ½”λ“ ννΈν™” κ°€λ¥
   - **μ½”λ“ ννΈν™”**λ€? 
     - ν•λ‚μ κΈ°λ¥μ΄ μ—¬λ¬ νμΌ/ν΄λμ¤/λ©”μ†λ“λ΅ λ¶ν•„μ”ν•κ² λ‚λ μ Έμμ–΄ μ „μ²΄ λ§¥λ½μ΄ ν•λμ— νμ•…λμ§€ μ•λ” μƒνƒ
     - μ¦‰, μ½”λ“κ°€ λ„λ¬΄ μκ² λ‚λ‰μ–΄μ Έμ„ μ½κ³  κ΄€λ¦¬ν•κΈ° μ–΄λ ¤μ΄ μƒνƒ

---

#### μ‹¤λ¬΄ μ‚¬μ© μ—¬λ¶€
- Spring κΈ°λ° μ‹¤λ¬΄μ—μ„ λ§μ΄ μ‚¬μ©λ¨!
  - κ²°μ , μ•λ¦Ό μ „μ†΅, ν• μΈ μ •μ±… λ“± μ μ—°ν•κ² λ¶„κΈ°ν•  λ•
  - Spring Security: `AuthenticationProvider`, `PasswordEncoder`
  - Bean μ£Όμ… + Map<String, μ „λµ> μΌλ΅ κ΄€λ¦¬ (ν©ν† λ¦¬ ν¨ν„΄κ³Ό κ²°ν•©)

---

#### Java/Spring μμ‹
[ν• μΈ μ •μ±… κµ¬ν„μ²΄λ¥Ό μƒν™©μ— λ”°λΌ] - μ „λµ ν¨ν„΄

```java
// μ „λµ μΈν„°νμ΄μ¤
public interface DiscountPolicy {
    int discount(int price);
    String getType();
}

// κµ¬μ²΄ μ „λµ κµ¬ν„μ²΄
@Component
public class FixedDiscountPolicy implements DiscountPolicy {
@Override
public int discount(int price) {
return 1000; // κ³ μ • ν• μΈ
}

    @Override
    public String getType() {
        return "fixed";
    }
}

@Component
public class RateDiscountPolicy implements DiscountPolicy {
@Override
public int discount(int price) {
return price * 10 / 100; // 10% ν• μΈ
}

    @Override
    public String getType() {
        return "rate";
    }
}
```

[μ „λµ μ„ νƒκ³Ό μ‹¤ν–‰] - ν©ν† λ¦¬ ν¨ν„΄

```java
@Component
public class DiscountService {
    private final Map<String, DiscountPolicy> discountPolicyMap;

    public DiscountService(List<DiscountPolicy> discountPolicies) {
        this.discountPolicyMap = discountPolicies.stream()
            .collect(Collectors.toMap(DiscountPolicy::getType, d -> d));
    }

    public int calculateDiscount(String discountType, int price) {
        DiscountPolicy discountPolicy = discountPolicyMap.get(discountType);
        return discountPolicy.discount(price);
    }
}

```

[Controller μ—μ„ μ‚¬μ©]

```java
@RestController
public class OrderController {
  private final DiscountService discountService;

  public OrderController(DiscountService discountService) {
    this.discountService = discountService;
  }

  @GetMapping("/discount")
  public String discount(@RequestParam String type, @RequestParam int price) {
    int discountPrice = discountService.calculateDiscount(type, price);
    return "ν• μΈ κΈμ•΅: " + discountPrice;
  }
}

```

β μ „λµ ν¨ν„΄κ³Ό ν©ν† λ¦¬ ν¨ν„΄

| μ—­ν•      | μ„¤λ…                                             | λ¶„λ¥ |
|--------|------------------------------------------------|----|
| μ „λµ ν¨ν„΄  | μΈν„°νμ΄μ¤μ™€ κ°κ°μ κµ¬ν„μ²΄                                 | ν–‰μ„ |
| ν©ν† λ¦¬ ν¨ν„΄ | new/if-else λ€μ‹  Map μΌλ΅ μ „λµ κ°μ²΄ μ„ νƒν•λ” **μ „λµ μ„ νƒκΈ°** μ—­ν•  | μƒμ„± |
   

β–«οΈEnum + μ „λµ ν¨ν„΄ + ν©ν† λ¦¬ ν¨ν„΄
- enum μΌλ΅ μ…λ ¥κ°’μ„ μ ν•ν•κ³ 
- Map κΈ°λ° ν©ν† λ¦¬μ key λ¥Ό enum μΌλ΅ μ‚¬μ©ν•κ³ ,
- μ „λµ ν¨ν„΄μ λ°ν™ νƒ€μ…μ—λ„ enum μ„ μ‚¬μ©ν•λ©΄
- νƒ€μ… μ•μ •μ„± + ν™•μ¥μ„± + μΌκ΄€μ„±

---

#### λ©΄μ ‘ μμƒ μ§λ¬Έ
1. μ „λµ ν¨ν„΄μ΄λ‘ λ¬΄μ—‡μΈκ°€μ”?
   - μ•κ³ λ¦¬μ¦ λλ” κΈ°λ¥μ„ λ³„λ„μ μ „λµμΌλ΅ λ¶„λ¦¬ν•κ³ , μ‹¤ν–‰ μ‹μ μ—μ„ μ›ν•λ” μ „λµμ„ μ„ νƒν•μ—¬ μ‚¬μ©ν•λ” λ””μμΈ ν¨ν„΄μ…λ‹λ‹¤.
   - μ΄λ¥Ό ν†µν•΄ μ „λµ κ°„μ κ²°ν•©λ„λ¥Ό λ‚®μ¶”κ³ , μƒλ΅μ΄ μ „λµ μ¶”κ°€ μ‹ κΈ°μ΅΄ μ½”λ“λ¥Ό μμ •ν•μ§€ μ•μ•„λ„ λλ” μ¥μ μ΄ μμµλ‹λ‹¤.  

2. μ „λµ ν¨ν„΄μ„ μ‚¬μ©ν•λ” μ΄μ λ” λ¬΄μ—‡μΈκ°€μ”?
   - μ„λ΅ λ‹¤λ¥Έ μ•κ³ λ¦¬μ¦μ΄λ‚ μ •μ±…μ΄ μ΅΄μ¬ν•  λ• μ μ—°ν•κ² κµμ²΄ν•  μ μμµλ‹λ‹¤.
   - μƒλ΅μ΄ μ „λµμ΄ μ¶”κ°€λλ”λΌλ„ κΈ°μ΅΄ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ” μμ •ν•  ν•„μ”κ°€ μ—†μµλ‹λ‹¤.
   - μ¤‘λ³µ μ½”λ“λ¥Ό μ κ±°ν•κ³  κ΄€μ‹¬μ‚¬λ¥Ό λ¶„λ¦¬ν•μ—¬ μ μ§€λ³΄μμ„±μ΄ λ†’μ•„μ§‘λ‹λ‹¤.  

3. μ „λµ ν¨ν„΄κ³Ό if-else λΉ„κµ
   - if-else λ¬Έμ€ μ΅°κ±΄μ— λ”°λΌ μ½”λ“κ°€ λμ–΄λ‚κ³  μ μ§€λ³΄μκ°€ μ–΄λ µμ§€λ§,
   - μ „λµ ν¨ν„΄μ€ μ „λµ μ„ νƒμ„ μ™Έλ¶€μ— μ„μ„ν•κ³ , μƒλ΅μ΄ μ „λµ μ¶”κ°€ μ‹ κΈ°μ΅΄ μ½”λ“λ¥Ό μμ •ν•μ§€ μ•μ•„λ„ λλ―€λ΅ OCP μ›μΉ™μ„ μ¤€μν•©λ‹λ‹¤.

4. Spring μ—μ„ μ „λµ ν¨ν„΄μ€ μ–΄λ–»κ² ν™μ©λλ‚μ”?
   - Spring μ—μ„λ” μ „λµ ν¨ν„΄μ„ Bean μ£Όμ… λ°©μ‹μΌλ΅ μμ£Ό μ‚¬μ©ν•©λ‹λ‹¤.
   - μΈν„°νμ΄μ¤ νƒ€μ…μ„ Bean μ„ μ£Όμ…λ°›κ³ , Map<String, Bean> λλ” List<Bean> ν•νƒλ΅ κ΄€λ¦¬ν•μ—¬ μ”μ²­ κ°’μ— λ”°λΌ μ „λµμ„ λ™μ μΌλ΅ μ„ νƒν•λ” κµ¬μ΅°λ΅ λ§μ΄ μ‚¬μ©λ©λ‹λ‹¤
   - μλ¥Ό λ“¤μ–΄, κ²°μ  μ‹μ¤ν…μ—μ„ κ²°μ  νƒ€μ…(card, kakaopay λ“±) μ— λ”°λΌ μ „λµ κ°μ²΄λ¥Ό μ„ νƒν•λ” κ²½μ°μ…λ‹λ‹¤.
