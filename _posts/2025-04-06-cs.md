---
title: "[CS] ë””ìì¸ íŒ¨í„´: ì˜µì €ë²„ íŒ¨í„´ (Observer Pattern)"
date: 2025-04-06 16:26:20 +0900
categories: ["2025-04-06", CS]
tags: [TIL, CS]
---
# CS
## ğŸ“š 1.1 ë””ìì¸ íŒ¨í„´

### 1.1.4 ì˜µì €ë²„ íŒ¨í„´ (Observer Pattern)

#### ì •ì˜
- í•˜ë‚˜ì˜ **ê°ì²´ ìƒíƒœ ë³€í™”**ê°€ ìˆì„ ë–„, ì´ë¥¼ ì˜ì¡´í•˜ëŠ” **ì—¬ëŸ¬ ê°ì²´(ì˜µì €ë²„) ë“¤ì—ê²Œ ìë™ìœ¼ë¡œ ì•Œë¦¼**ì´ ì „ë‹¬ë˜ëŠ” íŒ¨í„´
- ê´€ì°°ì(Observer) ë“¤ì´ í•˜ë‚˜ì˜ ì£¼ì²´(Subject) ì— ë“±ë¡(Subscribe) í•˜ê³ , ì£¼ì²´ì˜ ìƒíƒœ ë³€í™”ê°€ ë°œìƒí•˜ë©´ ìë™ìœ¼ë¡œ í†µë³´(Notify) ë°›ìŒ

---

#### ì˜ˆì‹œ ìƒí™©
1. ì´ë²¤íŠ¸ ì•Œë¦¼ ì‹œìŠ¤í…œ
   - ê²°ì œ ì™„ë£Œ â” ì‚¬ìš©ì, ê´€ë¦¬ì, ë¬¼ë¥˜ ì‹œìŠ¤í…œì— ì•Œë¦¼
2. SNS ì•Œë¦¼
   - íŒ”ë¡œìš°í•œ ìœ ì €ê°€ ê²Œì‹œê¸€ ì‘ì„± ì‹œ, íŒ”ë¡œì›Œë“¤ì—ê²Œ ì•Œë¦¼ ì „ì†¡
3. ë°°ë‹¬ ì£¼ë¬¸ ì‹œìŠ¤í…œ
   - ì£¼ë¬¸ ìƒíƒœ ë³€ê²½ ì‹œ ë¼ì´ë”, ê³ ê°, ë§¤ì¥ì— ìƒíƒœ ì „ë‹¬
4. í”„ë¡ íŠ¸ì—”ë“œ
   - Model ì´ ë³€ê²½ë˜ë©´ View ê°€ ìë™ìœ¼ë¡œ ê°±ì‹  (MVC íŒ¨í„´ì—ì„œë„ ì‚¬ìš©)

---

#### ì‚¬ìš© ì´ìœ  / ì¥ì 
1. ê°ì²´ ê°„ì˜ ëŠìŠ¨í•œ ê²°í•© (Low Coupling)
   - ì£¼ì²´(Subject) ëŠ” ê´€ì°°ì(Observer) ê°€ ëˆ„êµ¬ì¸ì§€ ëª°ë¼ë„ ë¨
   - ìœ ì—°í•˜ê³  í™•ì¥ ê°€ëŠ¥
2. ìë™í™”ëœ ì•Œë¦¼
   - ìƒíƒœ ë³€í™” ì‹œ, ìˆ˜ë™ í˜¸ì¶œ ì—†ì´ ìë™ìœ¼ë¡œ ì•Œë¦¼ ì „íŒŒ
3. OCP(ê°œë°©-íì‡„ ì›ì¹™) ì¤€ìˆ˜
   - ê´€ì°°ì ì¶”ê°€/ë³€ê²½ ì‹œ Subject ìˆ˜ì • ë¶ˆí•„ìš”

---

#### ë‹¨ì 
1. ìˆœí™˜ ì°¸ì¡° ìœ„í—˜
   - ê´€ì°°ìê°€ ë‹¤ì‹œ Subject ë¥¼ í˜¸ì¶œí•˜ëŠ” êµ¬ì¡°ë¼ë©´ ì£¼ì˜ í•„ìš”
2. ê´€ì°°ì ê´€ë¦¬ê°€ ë³µì¡
   - Observer ê°€ ë§ì•„ì§€ë©´ ì„±ëŠ¥ ë¬¸ì œ ë°œìƒ ê°€ëŠ¥
   - ì˜ëª» ê´€ë¦¬í•˜ë©´ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°œìƒ (Observer í•´ì§€ ëˆ„ë½)
3. ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ë¶€ë‹´
   - ì´ë²¤íŠ¸ í­ì£¼ ì‹œ ì²˜ë¦¬ ë¹„ìš© ì¦ê°€

---

#### ì‹¤ë¬´ ì‚¬ìš© ì—¬ë¶€
- Spring Event (`@EventListener`, `ApplicationEventPublisher`)
- Kafka, Redis Pub/Sub ê°™ì€ ë¹„ë™ê¸° ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ
- í”„ë¡ íŠ¸ì—”ë“œ: ex) React ìƒíƒœ ê´€ë¦¬ 

---

#### Java/Spring ì˜ˆì‹œ
##### Java
[ê¸°ë³¸ êµ¬í˜„ ì˜ˆì‹œ]

```java
public interface Observer {
    void update(String message);
}

public class User implements Observer {
    private String name;

    public User(String name) {
        this.name = name;
    }

    @Override
    public void update(String message) {
        System.out.println(name + " received: " + message);
    }
}

public class NotificationService {
  private List<Observer> observers = new ArrayList<>();

  public void addObserver(Observer observer) {
    observers.add(observer);
  }

  public void notifyObservers(String message) {
    for (Observer observer : observers) {
      observer.update(message);
    }
  }
}

```

[Observer ì‚¬ìš©]

```java
NotificationService service = new NotificationService();
service.addObserver(new User("Alice"));
service.addObserver(new User("Bob"));

service.notifyObservers("ì‹ ê·œ ì£¼ë¬¸ ë°œìƒ!");
```

##### Spring
- ì´ë²¤íŠ¸ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„ ê°€ëŠ¥!

[ì´ë²¤íŠ¸ í´ë˜ìŠ¤]

```java
public class OrderCompletedEvent {
  private final Long orderId;

  public OrderCompletedEvent(Long orderId) {
    this.orderId = orderId;
  }

  public Long getOrderId() {
    return orderId;
  }
}

```
[ì´ë²¤íŠ¸ ë°œìƒ]

```java
@Component
public class OrderService {
  private final ApplicationEventPublisher publisher;

  public OrderService(ApplicationEventPublisher publisher) {
    this.publisher = publisher;
  }

  public void completeOrder(Long orderId) {
    // ì£¼ë¬¸ ì™„ë£Œ ë¡œì§ ...
    publisher.publishEvent(new OrderCompletedEvent(orderId));
  }
}

```
[ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ (Observer)]

```java
@Component
public class NotificationListener {

    @EventListener
    public void handleOrderCompleted(OrderCompletedEvent event) {
        System.out.println("ì•Œë¦¼: ì£¼ë¬¸ ì™„ë£Œ - " + event.getOrderId());
    }
}

```
- Spring ì€ ë©”ì†Œë“œ ë‹¨ìœ„ë¡œ ì˜µì €ë²„ë¥¼ ì§€ì •!
- Spring ë‚´ë¶€ Event Dispatcher ê°€ ì´ë²¤íŠ¸ íƒ€ì…ê³¼ ë§¤ì¹­ë˜ëŠ” ë¦¬ìŠ¤ë„ˆë¥¼ ì°¾ì•„ì„œ ì‹¤í–‰!

| ìš©ì–´                       | Spring ì—ì„œ!                                                |
|--------------------------|-----------------------------------------------------------|
| Subject (ë°œí–‰ì, Publisher) | ApplicationEventPublisher (ì´ë²¤íŠ¸ë¥¼ ë°œí–‰í•˜ëŠ” ì£¼ì²´)                  |
| Publish (ë°œí–‰)             | publisher.publishEvent() í˜¸ì¶œ ì‹œ ì´ë²¤íŠ¸ë¥¼ ë°œí–‰ + ì•Œë¦¼ (Subject ì˜ ë™ì‘) |
| Observer (ê´€ì°°ì, Listener) | @EventListener ë¶™ì€ ë©”ì†Œë“œë“¤ (ì•Œë¦¼ì„ ë°›ê³  ë°˜ì‘í•˜ëŠ” ìª½)                    |
| Subscribe (êµ¬ë…)           | Spring ì´ ìë™ìœ¼ë¡œ @EventListener ë¥¼ êµ¬ë…ì(Observer) ë¡œ ë“±ë¡         |

---
#### ë©´ì ‘ ì˜ˆìƒ ì§ˆë¬¸
1. ì˜µì €ë²„ íŒ¨í„´ì´ë€ ë¬´ì—‡ì¸ê°€ìš”?
   - ì£¼ì²´ì˜ ìƒíƒœ ë³€í™”ê°€ ìˆì„ ë•Œ ì´ë¥¼ ê´€ì°°ì ì¦‰, ì˜µì €ë²„ì—ê²Œ ìë™ìœ¼ë¡œ ì•Œë¦¼ì„ ì „ë‹¬í•˜ëŠ” ë””ìì¸ íŒ¨í„´ì…ë‹ˆë‹¤.
   - ì´ë¥¼ í†µí•´ ê°ì²´ ê°„ ê²°í•©ë„ë¥¼ ë‚®ì¶”ê³ , í™•ì¥ì„±ì„ í™•ë³´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2. ì˜µì €ë²„ íŒ¨í„´ì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€ìš”?
   - ìƒíƒœ ë³€í™”ê°€ ìˆì„ ëŒ€ ìë™ìœ¼ë¡œ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì— ì•Œë¦¼ì„ ì „ë‹¬í•  ìˆ˜ ìˆì–´ ìœ ì§€ë³µë³´ìˆ˜ê°€ ìš©ì´í•©ë‹ˆë‹¤.
   - ë˜í•œ, ìƒˆë¡œìš´ ì˜µì €ë²„ ì¶”ê°€ ì‹œì—ë„ ì£¼ì²´ ì½”ë“œë¥¼ ë³€ê²½í•˜ì§€ ì•Šì•„ë„ ë˜ì–´ OCP ì›ì¹™ì„ ì¤€ìˆ˜í•©ë‹ˆë‹¤.
3. Spring ì—ì„œ ì˜µì €í¼ íŒ¨í„´ì„ ì‚¬ìš©í•˜ëŠ” ì˜ˆì‹œëŠ” ë¬´ì—‡ì¸ê°€ìš”?
   - ApplicationEventPublisher ì™€ @EventListener ë¥¼ í™œìš©í•˜ì—¬ ì˜µì €ë²„ íŒ¨í„´ì„ êµ¬í˜„í•©ë‹ˆë‹¤.
   - ì´ë²¤íŠ¸ê°€ ë°œí–‰ë˜ë©´ ë“±ë¡ëœ ë¦¬ìŠ¤ë„ˆê°€ ìë™ìœ¼ë¡œ ë™ì‘í•˜ì—¬, ê²°í•©ë„ë¥¼ ë‚®ì¶˜ ì„¤ê³„ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
   - ë˜í•œ, Kafka, Redis Pub/Sub ê³¼ ê°™ì€ ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²´ì—ì„œë„ ì‚¬ìš©ë©ë‹ˆë‹¤.
4. ì˜µì €ë²„ íŒ¨í„´ì˜ ë‹¨ì ì€ ë¬´ì—‡ì¸ê°€ìš”?
   - ì˜µì €ë²„ê°€ ë§ì•„ì§€ë©´ ê´€ë¦¬ê°€ ë³µì¡í•˜ê³ , ìˆœí™˜ ì°¸ì¡°ë‚˜ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
   - ë˜í•œ, ì´ë²¤íŠ¸ í­ì£¼ ì‹œ ì‹œìŠ¤í…œì— ë¶€í•˜ë¥¼ ì¤„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.
